<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of btkEmulateC3Dserver</title>
  <meta name="keywords" content="btkEmulateC3Dserver">
  <meta name="description" content="BTKEMULATEC3DSERVER Creates an emulated COM object for C3Dserver.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html Functions --><!-- # BTK --><!-- menu.html win64 -->
<h1>btkEmulateC3Dserver
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>BTKEMULATEC3DSERVER Creates an emulated COM object for C3Dserver.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function itf = btkEmulateC3Dserver() </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">BTKEMULATEC3DSERVER Creates an emulated COM object for C3Dserver.

  ITF = BTKEMULATEC3DSERVER() returns a structure which emulates the COM
  object generated by the function 'actxserver('C3Dserver.C3D')'. So, it gives
  the possibility to run scripts which use C3Dserver by using BTK.

  However, BTK did't make the same choice than C3Dserver to extract C3D 
  informations. Then, you will find some slight differences between both:
    - This emulation use function handles and then required for every
      functions to be used with parenthesis (you cannot call 'itf.Close'
      but 'itf.Close()'). Use parenthesis keep your code compatible with
      C3Dserver.
    - A C3D file is always opened in mode 3.
    - The event's status is not kept in BTK. Using the following code:
      'itf.SetEventStatus(0,'0')' sends a warning and do nothing. To remove
      the warning, you have to add this command:
      'warning('OFF','btk:C3Dserver:SetEventStatus')'
    - The group and parameter number are generated from the index instead
      of using the ID stored in the C3D file. Like that, the user doesn't 
      need to manage this number. So, if you set the group or parameter 
      number, a warning will inform you of the impossibility to do it. To
      remove this warning, type the following command:
      'warning('OFF','btk:C3Dserver:UniqueNumber')'
      Removing this warning has an effect on the functions
      SetGroupNumber, SetParameterNumber. But also on the function AddGroup
      when you set manually the number.
    - The function 'CompressParameterBlocks' is alway activated in BTK as the 
      the number of blocks needed for the groups/parameters is automatically 
      adapted when you write the C3D. Trying to deactivate the compression 
      (by using CompressParameterBlocks(0)) will send a warning. To remove the
      warning, you have to add the command:
      'warning('OFF','btk:C3Dserver:CompressParameterBlocks')'.
    - If some groups and parameters has the same name in the C3D file (which
      is the case with the group PROCESSING and its parameter for C3D files
      generated with Vicon Nexus 1.4), then BTK removes the duplication 
      (which is not the case of C3Dserver).
    - When you delete a group, it is not possible to keep the associated 
      parameters (They are stored in the group). If you try to do it, then
      a warning will be displayed and the parameters are removed. To remove the 
      warning, use the command: 'warning('OFF','btk:C3Dserver:DeleteGroup')'. 
    - The parameters are sorted by groups. Then if you select parameter by
      using hardcoded indices, you could have unexpected results.
    - The parameters' values are managed automatically inside BTK. In the
      case of parameter with the type 'Char', BTK trims (remove leading and
      trailing white space) values when you open the C3D file. If you set
      a number in a parameter with the type Char, then the number is
      converted into a string.
    - When you modify the parameter's type, then BTK adapts its values. In
      lots of conversion you can come back to the original value. However,
      transforming a string which doesn't contain a number creates the
      value 0. If you convert a Real into an Integer, you lost the 
      floating information. If you convert an Integer into a Byte and the 
      value is not in the range [-128, 127], then you lost the most 
      significant part of the number.
      For example, the conversion (Char-&gt;Integer) for 'FOO' creates the
      number 0. But the conversion (Char-&gt;Integer) for '1234' creates the
      number 1234. The conversion (Integer-&gt;Byte) for the number 12456 
      creates the number 168.
    - Modifying the parameter's type, adapts also its dimensions. 
      For example, transforming a integer parameter into a char parameter
      add 1 dimension corresponding to the number of characters. Or, in
      the other case, transforming a char parameter into an integer,
      remove.
    - Retrieving a parameter in another index than the original will keep
      the group for this index.
    - Trying to retrieve a parameter which has the same name than one in 
      the destination group (other than the original group) will throw an
      error.
    - An AV ratio equal to 0 in BTK is automatically converted to 1. The 
      number of analog frames is at least equal to the number of video
      frames.
    - Starting with BTK 0.2, the camera mask is no longer supported. Trying
      to extract or set a mask will display a warning. The returned masks
      from the functions GetPointMask and GetPointMaskEx are fake masks and
      always set to '0000000'. To remove the warning, you have to add
      the command: 'warning('OFF','btk:C3Dserver:FakeMask')'.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../Functions/BTK/linux64/@BasicFilters/btkGetForcePlatformWrenches.html" class="code" title="function FPW = btkGetForcePlatformWrenches(h, threshold) %#ok">btkGetForcePlatformWrenches</a>	BTKGETFORCEPLATFORMWRENCHES Extract force platform wrenches (FPW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/linux64/@BasicFilters/btkGetGroundReactionWrenches.html" class="code" title="function GRW = btkGetGroundReactionWrenches(h, threshold) %#ok">btkGetGroundReactionWrenches</a>	BTKGETGROUNDREACTIONWRENCHES Extract ground reaction wrenches (GRW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkAppendAnalog.html" class="code" title="function btkAppendAnalog(h, label, valuesdesc) %#ok">btkAppendAnalog</a>	BTKAPPENDANALOG Append a new analog channel and return an updated list of analog channels.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkAppendEvent.html" class="code" title="function btkAppendEvent(h, label, time, context, subject, description, id) %#ok">btkAppendEvent</a>	BTKAPPENDEVENT Append a new event and return an updated list of events.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>	BTKAPPENDMETADATA Append a new metada and return an updated list of the metadata in the acquisition.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkAppendPoint.html" class="code" title="function btkAppendPoint(h, type, label, values, residuals desc) %#ok">btkAppendPoint</a>	BTKAPPENDPOINT Append a new point and return an updated list of points.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>	BTKDELETEACQUISITION Deletes the acquisiton associated to the handle.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>	BTKGETANALOG Extract one analog channel from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>	BTKGETANALOGFRAMENUMBER Returns the number of frames for the analog channels.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>	BTKGETANALOGNUMBER Returns the number of analog channels.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>	BTKGETANALOGSAMPLENUMBERPERFRAME Return the number of analog samples per video frame.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogsValues.html" class="code" title="function av = btkGetAnalogsValues(h) %#ok">btkGetAnalogsValues</a>	BTKGETANALOGSVALUES Extract analog channels' values and store them in a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetEventsValues.html" class="code" title="function [times, labels, descriptions, ids] = btkGetEventsValuesValues(h) %#ok">btkGetEventsValues</a>	BTKGETEVENTSVALUES Extract events' values from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>	BTKGETFIRSTFRAME Returns acquisition's first frame index.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetMaxInterpolationGap.html" class="code" title="function gap = btkGetMaxInterpolationGap(h) %#ok">btkGetMaxInterpolationGap</a>	BTKGETMAXINTERPOLATIONGAP Returns acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>	btkGetMetaData Extract acquisition's metadata</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>	BTKGETPOINT Get point's data.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>	BTKGETPOINTFRAMENUMBER Returns the number of frames for the points.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrequency.html" class="code" title="function pf = btkGetPointFrequency(h) %#ok">btkGetPointFrequency</a>	BTKGETPOINTFREQUENCY Returns the point's frequency.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>	BTKGETPOINTNUMBER Returns number of points.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPointsResiduals.html" class="code" title="function r = btkGetPointsResiduals(h) %#ok">btkGetPointsResiduals</a>	BTKGETPOINTSRESIDUALS Extract points' residuals and store them in a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkGetPointsValues.html" class="code" title="function v = btkGetPointsValues(h) %#ok">btkGetPointsValues</a>	BTKGETPOINTSVALUES Extract points' components and store them in a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkNewAcquisition.html" class="code" title="function h = btkNewAcquisition(pn, fn, an, r) %#ok">btkNewAcquisition</a>	BTKNEWACQUISITION Create a new and initialized acquisition</li><li><a href="../../../Functions/BTK/linux64/@Common/btkRemoveAnalog.html" class="code" title="function btkRemoveAnalog(h, idx_or_label) %#ok">btkRemoveAnalog</a>	BTKREMOVEANALOG Delete the analog channel with the given index or label.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkRemoveEvent.html" class="code" title="function btkRemoveEvent(h, options) %#ok">btkRemoveEvent</a>	BTKREMOVEEVENT Delete events corresponding to the given criterias.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkRemoveMetaData.html" class="code" title="function btkRemoveMetaData(h, label_idx, sublabel_idx, ...) %#ok">btkRemoveMetaData</a>	BTKREMOVEMETADATA Remove a metada and return an updated list of the metada in the acquisition.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkRemovePoint.html" class="code" title="function btkRemovePoint(h, idx_or_label) %#ok">btkRemovePoint</a>	BTKREMOVEPOINT Delete the point with the given index or label.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogGain.html" class="code" title="function btkSetAnalogGain(h, idx_or_label, new_gain) %#ok">btkSetAnalogGain</a>	BTKSETANALOGGAIN Modify analog's gain and return updated analogs.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogOffset.html" class="code" title="function btkSetAnalogOffset(h, idx_or_label, new_offset) %#ok">btkSetAnalogOffset</a>	BTKSETANALOGOFFSET Modify analog's offset and return updated analogs.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogSampleNumberPerFrame.html" class="code" title="function btkSetAnalogSampleNumberPerFrame(h, ratio) %#ok">btkSetAnalogSampleNumberPerFrame</a>	BTKSETANALOGSAMPLENUMBERPERFRAME Set the number of analog sample per 3D frame</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogScale.html" class="code" title="function btkSetAnalogScale(h, idx_or_label, newscale) %#ok">btkSetAnalogScale</a>	BTKSETANALOGSCALE Modify analog's scale and return updated analogs.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>	BTKSETANALOGVALUES Modify analog's value and return updated analogs.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogsValues.html" class="code" title="function btkSetAnalogsValues(h, v) %#ok">btkSetAnalogsValues</a>	BTKSETANALOGSVALUES Sets analog channels' values from a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetEventLabel.html" class="code" title="function btkSetEventLabel(h, index, newlabel) %#ok">btkSetEventLabel</a>	BTKSETEVENTLABEL Modify the label of the selected event.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetEventTime.html" class="code" title="function btkSetEventTime(h, index, newtime) %#ok">btkSetEventTime</a>	BTKSETEVENTTIME Modify the time of the selected event.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetFrameNumber.html" class="code" title="function btkSetFrameNumber(h, num) %#ok">btkSetFrameNumber</a>	BTKSETFRAMENUMBER Set points and analogs frames number.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetFrequency.html" class="code" title="function btkSetFrequency(h, freq) %#ok">btkSetFrequency</a>	BTKSETFREQUENCY Set the main frequency.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMaxInterpolationGap.html" class="code" title="function btkSetMaxInterpolationGap(h, gap) %#ok">btkSetMaxInterpolationGap</a>	BTKSETMAXINTERPOLATIONGAP Set acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>	BTKSETMETADATADESCRIPTION Set a metadata's description.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>	BTKSETMETADATADIMENSIONS Set metadata's dimensions.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataFormat.html" class="code" title="function btkSetMetaDataFormat(h, label_idx, sublabel_idx, ..., newFormat) %#ok">btkSetMetaDataFormat</a>	BTKSETMETADATAFORMAT Set a metadata's format.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>	BTKSETMETADATALABEL Set a metadata's label</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>	BTKSETMETADATAUNLOCK Set the unlock state of a metadata.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>	BTKSETMETADATAVALUE Set one metada's value.</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetPointResiduals.html" class="code" title="function btkSetPointResiduals(h, idx_or_abel, r) %#ok">btkSetPointResiduals</a>	BTKSETPOINTRESIDUALS Sets point's residuals from a row vector</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetPointValues.html" class="code" title="function btkSetPointValues(h, idx_or_label, v) %#ok">btkSetPointValues</a>	BTKSETPOINTVALUES Sets point's coordinates (values) from a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetPointsResiduals.html" class="code" title="function btkSetPointsResiduals(h. r) %#ok">btkSetPointsResiduals</a>	BTKSETPOINTSRESIDUALS Sets points' residuals from a matrix</li><li><a href="../../../Functions/BTK/linux64/@Common/btkSetPointsValues.html" class="code" title="function btkSetPointsValues(h. v) %#ok">btkSetPointsValues</a>	BTKSETPOINTSVALUES Sets points' components from a matrix</li><li><a href="../../../Functions/BTK/linux64/@IO/btkReadAcquisition.html" class="code" title="function h = btkReadAcquisition(filename) %#ok">btkReadAcquisition</a>	BTKREADACQUISITION Read an acquisition's file (C3D, TRC, ...)</li><li><a href="../../../Functions/BTK/linux64/@IO/btkWriteAcquisition.html" class="code" title="function h = btkWriteAcquisition(filename) %#ok">btkWriteAcquisition</a>	BTKWRITEACQUISITION Write acquisition's data into file (C3D, TRC, ...)</li><li><a href="../../../Functions/BTK/linux64/btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>	BTKFINDMETADATA Return the searched metadata or 0 if not found.</li><li><a href="../../../Functions/BTK/linux64/btkGetEventNumber.html" class="code" title="function num = btkGetEventNumber(h)">btkGetEventNumber</a>	BTKGETEVENTNUMBER Return the number of events.</li><li><a href="../../../Functions/BTK/linux64/btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>	BTKGETLASTFRAME Returns acquisition's last frame index.</li><li><a href="../../../Functions/BTK/linux64/btkGetVersion.html" class="code" title="function v = btkGetVersion()">btkGetVersion</a>	V = BTKGETVERSION returns the release number of BTK.</li><li><a href="../../../Functions/BTK/linux64/btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>	BTKMETADATAINFO Create a structure containing the required fields for the informations of a metadata.</li><li><a href="../../../Functions/BTK/mac64/@BasicFilters/btkGetForcePlatformWrenches.html" class="code" title="function FPW = btkGetForcePlatformWrenches(h, threshold) %#ok">btkGetForcePlatformWrenches</a>	BTKGETFORCEPLATFORMWRENCHES Extract force platform wrenches (FPW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/mac64/@BasicFilters/btkGetGroundReactionWrenches.html" class="code" title="function GRW = btkGetGroundReactionWrenches(h, threshold) %#ok">btkGetGroundReactionWrenches</a>	BTKGETGROUNDREACTIONWRENCHES Extract ground reaction wrenches (GRW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkAppendAnalog.html" class="code" title="function btkAppendAnalog(h, label, valuesdesc) %#ok">btkAppendAnalog</a>	BTKAPPENDANALOG Append a new analog channel and return an updated list of analog channels.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkAppendEvent.html" class="code" title="function btkAppendEvent(h, label, time, context, subject, description, id) %#ok">btkAppendEvent</a>	BTKAPPENDEVENT Append a new event and return an updated list of events.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>	BTKAPPENDMETADATA Append a new metada and return an updated list of the metadata in the acquisition.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkAppendPoint.html" class="code" title="function btkAppendPoint(h, type, label, values, residuals desc) %#ok">btkAppendPoint</a>	BTKAPPENDPOINT Append a new point and return an updated list of points.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>	BTKDELETEACQUISITION Deletes the acquisiton associated to the handle.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>	BTKGETANALOG Extract one analog channel from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>	BTKGETANALOGFRAMENUMBER Returns the number of frames for the analog channels.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>	BTKGETANALOGNUMBER Returns the number of analog channels.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>	BTKGETANALOGSAMPLENUMBERPERFRAME Return the number of analog samples per video frame.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetAnalogsValues.html" class="code" title="function av = btkGetAnalogsValues(h) %#ok">btkGetAnalogsValues</a>	BTKGETANALOGSVALUES Extract analog channels' values and store them in a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetEventsValues.html" class="code" title="function [times, labels, descriptions, ids] = btkGetEventsValuesValues(h) %#ok">btkGetEventsValues</a>	BTKGETEVENTSVALUES Extract events' values from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>	BTKGETFIRSTFRAME Returns acquisition's first frame index.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetMaxInterpolationGap.html" class="code" title="function gap = btkGetMaxInterpolationGap(h) %#ok">btkGetMaxInterpolationGap</a>	BTKGETMAXINTERPOLATIONGAP Returns acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>	btkGetMetaData Extract acquisition's metadata</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>	BTKGETPOINT Get point's data.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>	BTKGETPOINTFRAMENUMBER Returns the number of frames for the points.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPointFrequency.html" class="code" title="function pf = btkGetPointFrequency(h) %#ok">btkGetPointFrequency</a>	BTKGETPOINTFREQUENCY Returns the point's frequency.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>	BTKGETPOINTNUMBER Returns number of points.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPointsResiduals.html" class="code" title="function r = btkGetPointsResiduals(h) %#ok">btkGetPointsResiduals</a>	BTKGETPOINTSRESIDUALS Extract points' residuals and store them in a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkGetPointsValues.html" class="code" title="function v = btkGetPointsValues(h) %#ok">btkGetPointsValues</a>	BTKGETPOINTSVALUES Extract points' components and store them in a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkNewAcquisition.html" class="code" title="function h = btkNewAcquisition(pn, fn, an, r) %#ok">btkNewAcquisition</a>	BTKNEWACQUISITION Create a new and initialized acquisition</li><li><a href="../../../Functions/BTK/mac64/@Common/btkRemoveAnalog.html" class="code" title="function btkRemoveAnalog(h, idx_or_label) %#ok">btkRemoveAnalog</a>	BTKREMOVEANALOG Delete the analog channel with the given index or label.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkRemoveEvent.html" class="code" title="function btkRemoveEvent(h, options) %#ok">btkRemoveEvent</a>	BTKREMOVEEVENT Delete events corresponding to the given criterias.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkRemoveMetaData.html" class="code" title="function btkRemoveMetaData(h, label_idx, sublabel_idx, ...) %#ok">btkRemoveMetaData</a>	BTKREMOVEMETADATA Remove a metada and return an updated list of the metada in the acquisition.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkRemovePoint.html" class="code" title="function btkRemovePoint(h, idx_or_label) %#ok">btkRemovePoint</a>	BTKREMOVEPOINT Delete the point with the given index or label.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogGain.html" class="code" title="function btkSetAnalogGain(h, idx_or_label, new_gain) %#ok">btkSetAnalogGain</a>	BTKSETANALOGGAIN Modify analog's gain and return updated analogs.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogOffset.html" class="code" title="function btkSetAnalogOffset(h, idx_or_label, new_offset) %#ok">btkSetAnalogOffset</a>	BTKSETANALOGOFFSET Modify analog's offset and return updated analogs.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogSampleNumberPerFrame.html" class="code" title="function btkSetAnalogSampleNumberPerFrame(h, ratio) %#ok">btkSetAnalogSampleNumberPerFrame</a>	BTKSETANALOGSAMPLENUMBERPERFRAME Set the number of analog sample per 3D frame</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogScale.html" class="code" title="function btkSetAnalogScale(h, idx_or_label, newscale) %#ok">btkSetAnalogScale</a>	BTKSETANALOGSCALE Modify analog's scale and return updated analogs.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>	BTKSETANALOGVALUES Modify analog's value and return updated analogs.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetAnalogsValues.html" class="code" title="function btkSetAnalogsValues(h, v) %#ok">btkSetAnalogsValues</a>	BTKSETANALOGSVALUES Sets analog channels' values from a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetEventLabel.html" class="code" title="function btkSetEventLabel(h, index, newlabel) %#ok">btkSetEventLabel</a>	BTKSETEVENTLABEL Modify the label of the selected event.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetEventTime.html" class="code" title="function btkSetEventTime(h, index, newtime) %#ok">btkSetEventTime</a>	BTKSETEVENTTIME Modify the time of the selected event.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetFrameNumber.html" class="code" title="function btkSetFrameNumber(h, num) %#ok">btkSetFrameNumber</a>	BTKSETFRAMENUMBER Set points and analogs frames number.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetFrequency.html" class="code" title="function btkSetFrequency(h, freq) %#ok">btkSetFrequency</a>	BTKSETFREQUENCY Set the main frequency.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMaxInterpolationGap.html" class="code" title="function btkSetMaxInterpolationGap(h, gap) %#ok">btkSetMaxInterpolationGap</a>	BTKSETMAXINTERPOLATIONGAP Set acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>	BTKSETMETADATADESCRIPTION Set a metadata's description.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>	BTKSETMETADATADIMENSIONS Set metadata's dimensions.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataFormat.html" class="code" title="function btkSetMetaDataFormat(h, label_idx, sublabel_idx, ..., newFormat) %#ok">btkSetMetaDataFormat</a>	BTKSETMETADATAFORMAT Set a metadata's format.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>	BTKSETMETADATALABEL Set a metadata's label</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>	BTKSETMETADATAUNLOCK Set the unlock state of a metadata.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>	BTKSETMETADATAVALUE Set one metada's value.</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetPointResiduals.html" class="code" title="function btkSetPointResiduals(h, idx_or_abel, r) %#ok">btkSetPointResiduals</a>	BTKSETPOINTRESIDUALS Sets point's residuals from a row vector</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetPointValues.html" class="code" title="function btkSetPointValues(h, idx_or_label, v) %#ok">btkSetPointValues</a>	BTKSETPOINTVALUES Sets point's coordinates (values) from a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetPointsResiduals.html" class="code" title="function btkSetPointsResiduals(h. r) %#ok">btkSetPointsResiduals</a>	BTKSETPOINTSRESIDUALS Sets points' residuals from a matrix</li><li><a href="../../../Functions/BTK/mac64/@Common/btkSetPointsValues.html" class="code" title="function btkSetPointsValues(h. v) %#ok">btkSetPointsValues</a>	BTKSETPOINTSVALUES Sets points' components from a matrix</li><li><a href="../../../Functions/BTK/mac64/@IO/btkReadAcquisition.html" class="code" title="function h = btkReadAcquisition(filename) %#ok">btkReadAcquisition</a>	BTKREADACQUISITION Read an acquisition's file (C3D, TRC, ...)</li><li><a href="../../../Functions/BTK/mac64/@IO/btkWriteAcquisition.html" class="code" title="function h = btkWriteAcquisition(filename) %#ok">btkWriteAcquisition</a>	BTKWRITEACQUISITION Write acquisition's data into file (C3D, TRC, ...)</li><li><a href="../../../Functions/BTK/mac64/btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>	BTKFINDMETADATA Return the searched metadata or 0 if not found.</li><li><a href="../../../Functions/BTK/mac64/btkGetEventNumber.html" class="code" title="function num = btkGetEventNumber(h)">btkGetEventNumber</a>	BTKGETEVENTNUMBER Return the number of events.</li><li><a href="../../../Functions/BTK/mac64/btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>	BTKGETLASTFRAME Returns acquisition's last frame index.</li><li><a href="../../../Functions/BTK/mac64/btkGetVersion.html" class="code" title="function v = btkGetVersion()">btkGetVersion</a>	V = BTKGETVERSION returns the release number of BTK.</li><li><a href="../../../Functions/BTK/mac64/btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>	BTKMETADATAINFO Create a structure containing the required fields for the informations of a metadata.</li><li><a href="../../../Functions/BTK/win64/@BasicFilters/btkGetForcePlatformWrenches.html" class="code" title="function FPW = btkGetForcePlatformWrenches(h, threshold) %#ok">btkGetForcePlatformWrenches</a>	BTKGETFORCEPLATFORMWRENCHES Extract force platform wrenches (FPW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/win64/@BasicFilters/btkGetGroundReactionWrenches.html" class="code" title="function GRW = btkGetGroundReactionWrenches(h, threshold) %#ok">btkGetGroundReactionWrenches</a>	BTKGETGROUNDREACTIONWRENCHES Extract ground reaction wrenches (GRW) from a biomechanical acquisition in the global frame.</li><li><a href="../../../Functions/BTK/win64/@Common/btkAppendAnalog.html" class="code" title="function btkAppendAnalog(h, label, valuesdesc) %#ok">btkAppendAnalog</a>	BTKAPPENDANALOG Append a new analog channel and return an updated list of analog channels.</li><li><a href="../../../Functions/BTK/win64/@Common/btkAppendEvent.html" class="code" title="function btkAppendEvent(h, label, time, context, subject, description, id) %#ok">btkAppendEvent</a>	BTKAPPENDEVENT Append a new event and return an updated list of events.</li><li><a href="../../../Functions/BTK/win64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>	BTKAPPENDMETADATA Append a new metada and return an updated list of the metadata in the acquisition.</li><li><a href="../../../Functions/BTK/win64/@Common/btkAppendPoint.html" class="code" title="function btkAppendPoint(h, type, label, values, residuals desc) %#ok">btkAppendPoint</a>	BTKAPPENDPOINT Append a new point and return an updated list of points.</li><li><a href="../../../Functions/BTK/win64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>	BTKDELETEACQUISITION Deletes the acquisiton associated to the handle.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>	BTKGETANALOG Extract one analog channel from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>	BTKGETANALOGFRAMENUMBER Returns the number of frames for the analog channels.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>	BTKGETANALOGNUMBER Returns the number of analog channels.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>	BTKGETANALOGSAMPLENUMBERPERFRAME Return the number of analog samples per video frame.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetAnalogsValues.html" class="code" title="function av = btkGetAnalogsValues(h) %#ok">btkGetAnalogsValues</a>	BTKGETANALOGSVALUES Extract analog channels' values and store them in a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetEventsValues.html" class="code" title="function [times, labels, descriptions, ids] = btkGetEventsValuesValues(h) %#ok">btkGetEventsValues</a>	BTKGETEVENTSVALUES Extract events' values from a biomechanical acquisition</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>	BTKGETFIRSTFRAME Returns acquisition's first frame index.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetMaxInterpolationGap.html" class="code" title="function gap = btkGetMaxInterpolationGap(h) %#ok">btkGetMaxInterpolationGap</a>	BTKGETMAXINTERPOLATIONGAP Returns acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>	btkGetMetaData Extract acquisition's metadata</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>	BTKGETPOINT Get point's data.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>	BTKGETPOINTFRAMENUMBER Returns the number of frames for the points.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPointFrequency.html" class="code" title="function pf = btkGetPointFrequency(h) %#ok">btkGetPointFrequency</a>	BTKGETPOINTFREQUENCY Returns the point's frequency.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>	BTKGETPOINTNUMBER Returns number of points.</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPointsResiduals.html" class="code" title="function r = btkGetPointsResiduals(h) %#ok">btkGetPointsResiduals</a>	BTKGETPOINTSRESIDUALS Extract points' residuals and store them in a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkGetPointsValues.html" class="code" title="function v = btkGetPointsValues(h) %#ok">btkGetPointsValues</a>	BTKGETPOINTSVALUES Extract points' components and store them in a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkNewAcquisition.html" class="code" title="function h = btkNewAcquisition(pn, fn, an, r) %#ok">btkNewAcquisition</a>	BTKNEWACQUISITION Create a new and initialized acquisition</li><li><a href="../../../Functions/BTK/win64/@Common/btkRemoveAnalog.html" class="code" title="function btkRemoveAnalog(h, idx_or_label) %#ok">btkRemoveAnalog</a>	BTKREMOVEANALOG Delete the analog channel with the given index or label.</li><li><a href="../../../Functions/BTK/win64/@Common/btkRemoveEvent.html" class="code" title="function btkRemoveEvent(h, options) %#ok">btkRemoveEvent</a>	BTKREMOVEEVENT Delete events corresponding to the given criterias.</li><li><a href="../../../Functions/BTK/win64/@Common/btkRemoveMetaData.html" class="code" title="function btkRemoveMetaData(h, label_idx, sublabel_idx, ...) %#ok">btkRemoveMetaData</a>	BTKREMOVEMETADATA Remove a metada and return an updated list of the metada in the acquisition.</li><li><a href="../../../Functions/BTK/win64/@Common/btkRemovePoint.html" class="code" title="function btkRemovePoint(h, idx_or_label) %#ok">btkRemovePoint</a>	BTKREMOVEPOINT Delete the point with the given index or label.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogGain.html" class="code" title="function btkSetAnalogGain(h, idx_or_label, new_gain) %#ok">btkSetAnalogGain</a>	BTKSETANALOGGAIN Modify analog's gain and return updated analogs.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogOffset.html" class="code" title="function btkSetAnalogOffset(h, idx_or_label, new_offset) %#ok">btkSetAnalogOffset</a>	BTKSETANALOGOFFSET Modify analog's offset and return updated analogs.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogSampleNumberPerFrame.html" class="code" title="function btkSetAnalogSampleNumberPerFrame(h, ratio) %#ok">btkSetAnalogSampleNumberPerFrame</a>	BTKSETANALOGSAMPLENUMBERPERFRAME Set the number of analog sample per 3D frame</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogScale.html" class="code" title="function btkSetAnalogScale(h, idx_or_label, newscale) %#ok">btkSetAnalogScale</a>	BTKSETANALOGSCALE Modify analog's scale and return updated analogs.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>	BTKSETANALOGVALUES Modify analog's value and return updated analogs.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetAnalogsValues.html" class="code" title="function btkSetAnalogsValues(h, v) %#ok">btkSetAnalogsValues</a>	BTKSETANALOGSVALUES Sets analog channels' values from a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetEventLabel.html" class="code" title="function btkSetEventLabel(h, index, newlabel) %#ok">btkSetEventLabel</a>	BTKSETEVENTLABEL Modify the label of the selected event.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetEventTime.html" class="code" title="function btkSetEventTime(h, index, newtime) %#ok">btkSetEventTime</a>	BTKSETEVENTTIME Modify the time of the selected event.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetFrameNumber.html" class="code" title="function btkSetFrameNumber(h, num) %#ok">btkSetFrameNumber</a>	BTKSETFRAMENUMBER Set points and analogs frames number.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetFrequency.html" class="code" title="function btkSetFrequency(h, freq) %#ok">btkSetFrequency</a>	BTKSETFREQUENCY Set the main frequency.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMaxInterpolationGap.html" class="code" title="function btkSetMaxInterpolationGap(h, gap) %#ok">btkSetMaxInterpolationGap</a>	BTKSETMAXINTERPOLATIONGAP Set acquisition's maximum interpolation gap.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>	BTKSETMETADATADESCRIPTION Set a metadata's description.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>	BTKSETMETADATADIMENSIONS Set metadata's dimensions.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataFormat.html" class="code" title="function btkSetMetaDataFormat(h, label_idx, sublabel_idx, ..., newFormat) %#ok">btkSetMetaDataFormat</a>	BTKSETMETADATAFORMAT Set a metadata's format.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>	BTKSETMETADATALABEL Set a metadata's label</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>	BTKSETMETADATAUNLOCK Set the unlock state of a metadata.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>	BTKSETMETADATAVALUE Set one metada's value.</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetPointResiduals.html" class="code" title="function btkSetPointResiduals(h, idx_or_abel, r) %#ok">btkSetPointResiduals</a>	BTKSETPOINTRESIDUALS Sets point's residuals from a row vector</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetPointValues.html" class="code" title="function btkSetPointValues(h, idx_or_label, v) %#ok">btkSetPointValues</a>	BTKSETPOINTVALUES Sets point's coordinates (values) from a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetPointsResiduals.html" class="code" title="function btkSetPointsResiduals(h. r) %#ok">btkSetPointsResiduals</a>	BTKSETPOINTSRESIDUALS Sets points' residuals from a matrix</li><li><a href="../../../Functions/BTK/win64/@Common/btkSetPointsValues.html" class="code" title="function btkSetPointsValues(h. v) %#ok">btkSetPointsValues</a>	BTKSETPOINTSVALUES Sets points' components from a matrix</li><li><a href="../../../Functions/BTK/win64/@IO/btkReadAcquisition.html" class="code" title="function h = btkReadAcquisition(filename) %#ok">btkReadAcquisition</a>	BTKREADACQUISITION Read an acquisition's file (C3D, TRC, ...)</li><li><a href="../../../Functions/BTK/win64/@IO/btkWriteAcquisition.html" class="code" title="function h = btkWriteAcquisition(filename) %#ok">btkWriteAcquisition</a>	BTKWRITEACQUISITION Write acquisition's data into file (C3D, TRC, ...)</li><li><a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>	BTKFINDMETADATA Return the searched metadata or 0 if not found.</li><li><a href="btkGetEventNumber.html" class="code" title="function num = btkGetEventNumber(h)">btkGetEventNumber</a>	BTKGETEVENTNUMBER Return the number of events.</li><li><a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>	BTKGETLASTFRAME Returns acquisition's last frame index.</li><li><a href="btkGetVersion.html" class="code" title="function v = btkGetVersion()">btkGetVersion</a>	V = BTKGETVERSION returns the release number of BTK.</li><li><a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>	BTKMETADATAINFO Create a structure containing the required fields for the informations of a metadata.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function h = btkC3DserverGetHandle(id)</a></li><li><a href="#_sub2" class="code">function res = btkC3DserverOpen(id, filename, mode)</a></li><li><a href="#_sub3" class="code">function btkC3DserverClose(id)</a></li><li><a href="#_sub4" class="code">function res = btkC3DserverNewFile(id, file, fileType, dataType, numAnalog, avRatio, numMarkers, frequencyRate, scalingFactor, numFrames)</a></li><li><a href="#_sub5" class="code">function res = btkC3DserverIsModified(id)</a></li><li><a href="#_sub6" class="code">function res = btkC3DserverSaveFile(id, filename, fileType)</a></li><li><a href="#_sub7" class="code">function num = btkC3DserverGetNumber3DPoints(id)</a></li><li><a href="#_sub8" class="code">function num = btkC3DserverGetAnalogChannels(id)</a></li><li><a href="#_sub9" class="code">function num = btkC3DserverGetVideoFrame(id,startEnd)</a></li><li><a href="#_sub10" class="code">function num = btkC3DserverGetMaxInterpolationGap(id)</a></li><li><a href="#_sub11" class="code">function res = btkC3DserverSetMaxInterpolationGap(id, maxInterGap)</a></li><li><a href="#_sub12" class="code">function scale = btkC3DserverGetHeaderScaleFactor(id)</a></li><li><a href="#_sub13" class="code">function num = btkC3DserverGetStartingRecord(id)</a></li><li><a href="#_sub14" class="code">function ratio = btkC3DserverGetAnalogVideoRatio(id)</a></li><li><a href="#_sub15" class="code">function f = btkC3DserverGetVideoFrameRate(id)</a></li><li><a href="#_sub16" class="code">function type = btkC3DserverGetFileType(id)</a></li><li><a href="#_sub17" class="code">function type = btkC3DserverGetDataType(id)</a></li><li><a href="#_sub18" class="code">function num = btkC3DserverGetNumberEvents(id)</a></li><li><a href="#_sub19" class="code">function time = btkC3DserverGetEventTime(id, index)</a></li><li><a href="#_sub20" class="code">function label = btkC3DserverGetEventLabel(id, index)</a></li><li><a href="#_sub21" class="code">function status = btkC3DserverGetEventStatus(id, index)</a></li><li><a href="#_sub22" class="code">function res = btkC3DserverAddEvent(id, label, status, time)</a></li><li><a href="#_sub23" class="code">function res = btkC3DserverSetEventLabel(id, index, label)</a></li><li><a href="#_sub24" class="code">function res = btkC3DserverSetEventTime(id, index, time)</a></li><li><a href="#_sub25" class="code">function res = btkC3DserverSetEventStatus(id, index, status)</a></li><li><a href="#_sub26" class="code">function res = btkC3DserverDeleteEvent(id, index)</a></li><li><a href="#_sub27" class="code">function btkC3DserverSetStrictParameterChecking(id, value)</a></li><li><a href="#_sub28" class="code">function btkCompressParameterBlocks(id, compress)</a></li><li><a href="#_sub29" class="code">function num = btkC3DserverGetNumberGroups(id)</a></li><li><a href="#_sub30" class="code">function index = btkC3DserverGetGroupIndex(id, label)</a></li><li><a href="#_sub31" class="code">function name = btkC3DserverGetGroupName(id, index)</a></li><li><a href="#_sub32" class="code">function num = btkC3DserverGetGroupNumber(id, index)</a></li><li><a href="#_sub33" class="code">function locked = btkC3DserverGetGroupLock(id, index)</a></li><li><a href="#_sub34" class="code">function desc = btkC3DserverGetGroupDescription(id, index)</a></li><li><a href="#_sub35" class="code">function res = btkC3DserverSetGroupName(id, index, name)</a></li><li><a href="#_sub36" class="code">function res = btkC3DserverSetGroupNumber(id, index, num)</a></li><li><a href="#_sub37" class="code">function res = btkC3DserverSetGroupDescription(id, index, desc)</a></li><li><a href="#_sub38" class="code">function res = btkC3DserverSetGroupLock(id, index, locked)</a></li><li><a href="#_sub39" class="code">function res = btkC3DserverAddGroup(id, num, name, desc, locked)</a></li><li><a href="#_sub40" class="code">function res = btkC3DserverDeleteGroup(id, index, deleteParameters)</a></li><li><a href="#_sub41" class="code">function num = btkC3DserverGetNumberParameters(id)</a></li><li><a href="#_sub42" class="code">function index = btkC3DserverGetParameterIndex(id, groupLabel, paramLabel)</a></li><li><a href="#_sub43" class="code">function name = btkC3DserverGetParameterName(id, index)</a></li><li><a href="#_sub44" class="code">function num = btkC3DserverGetParameterNumber(id, index)</a></li><li><a href="#_sub45" class="code">function locked = btkC3DserverGetParameterLock(id, index)</a></li><li><a href="#_sub46" class="code">function description = btkC3DserverGetParameterDescription(id, index)</a></li><li><a href="#_sub47" class="code">function t = btkC3DserverGetParameterType(id, index)</a></li><li><a href="#_sub48" class="code">function num = btkC3DserverGetParameterNumberDim(id, index)</a></li><li><a href="#_sub49" class="code">function num = btkC3DserverGetParameterDimension(id, index, dim)</a></li><li><a href="#_sub50" class="code">function num = btkC3DserverGetParameterLength(id, index)</a></li><li><a href="#_sub51" class="code">function value = btkC3DserverGetParameterValue(id, index, item)</a></li><li><a href="#_sub52" class="code">function res = btkC3DserverSetParameterName(id, index, name)</a></li><li><a href="#_sub53" class="code">function res = btkC3DserverSetParameterNumber(id, index, num)</a></li><li><a href="#_sub54" class="code">function res = btkC3DserverSetParameterLock(id, index, locked)</a></li><li><a href="#_sub55" class="code">function res = btkC3DserverSetParameterDescription(id, index, desc)</a></li><li><a href="#_sub56" class="code">function res = btkC3DserverSetParameterType(id, index, t)</a></li><li><a href="#_sub57" class="code">function res = btkC3DserverSetParameterValue(id, index, item, value)</a></li><li><a href="#_sub58" class="code">function res = btkC3DserverAddParameter(id, name, desc, group, locked, t, numDim, dimList, data)</a></li><li><a href="#_sub59" class="code">function res = btkC3DserverDeleteParameter(id, index)</a></li><li><a href="#_sub60" class="code">function res = btkC3DserverCopyParameter(id, index)</a></li><li><a href="#_sub61" class="code">function res = btkC3DserverRetrieveParameter(id, index)</a></li><li><a href="#_sub62" class="code">function res = btkC3DserverRemoveParameterData(id, index, item)</a></li><li><a href="#_sub63" class="code">function res = btkC3DserverAddParameterData(id, index, items)</a></li><li><a href="#_sub64" class="code">function data = btkC3DserverGetAnalogData(id, channel, frame, subFrame, scaled, offset, scale, useScale)</a></li><li><a href="#_sub65" class="code">function data = btkC3DserverGetAnalogDataEx(id, channel, startFrame, endFrame, scaled, offset, scale, useScale)</a></li><li><a href="#_sub66" class="code">function res = btkC3DserverSetAnalogData(id, channel, frame, subFrame, data)</a></li><li><a href="#_sub67" class="code">function res = btkC3DserverSetAnalogDataEx(id, channel, frame, data)</a></li><li><a href="#_sub68" class="code">function res = btkC3DserverSetAVRatio(id, avRatio)</a></li><li><a href="#_sub69" class="code">function index = btkC3DserverAddAnalogChannel(id)</a></li><li><a href="#_sub70" class="code">function res = btkC3DserverDeleteAnalogChannel(id, index)</a></li><li><a href="#_sub71" class="code">function res = btkC3DserverDeleteAnalogChannelWithParameter(id, index)</a></li><li><a href="#_sub72" class="code">function data = btkC3DserverGetForceData(id, cord, fp, startFrame, endFrame)</a></li><li><a href="#_sub73" class="code">function data = btkC3DserverGetMomentData(id, cord, fp, startFrame, endFrame)</a></li><li><a href="#_sub74" class="code">function res = btkC3DserverZeroAnalogChannel(id, channel, method, frames)</a></li><li><a href="#_sub75" class="code">function data = btkC3DserverGetPointData(id, channel, cord, frame, scaled)</a></li><li><a href="#_sub76" class="code">function data = btkC3DserverGetPointDataEx(id, channel, cord, startFrame, endFrame, scaled)</a></li><li><a href="#_sub77" class="code">function data = btkC3DserverGetPointResidualEx(id, channel, startFrame, endFrame)</a></li><li><a href="#_sub78" class="code">function data = btkC3DserverGetPointResidual(id, channel, frame)</a></li><li><a href="#_sub79" class="code">function data = btkC3DserverGetPointMask(id, channel, frame)</a></li><li><a href="#_sub80" class="code">function data = btkC3DserverGetPointMaskEx(id, channel, startFrame, endFrame)</a></li><li><a href="#_sub81" class="code">function res = btkC3DserverSetPointData(id, channel, cord, frame, data)</a></li><li><a href="#_sub82" class="code">function res = btkC3DserverSetPointDataEx(id, channel, cord, frame, data)</a></li><li><a href="#_sub83" class="code">function index = btkC3DserverAddMarker(id)</a></li><li><a href="#_sub84" class="code">function res = btkC3DserverDeleteMarker(id, index)</a></li><li><a href="#_sub85" class="code">function res = btkC3DserverDeleteMarkerWithParameter(id, index)</a></li><li><a href="#_sub86" class="code">function num = btkC3DserverAddFrames(id, frames, insertAt)</a></li><li><a href="#_sub87" class="code">function num = btkC3DserverDeleteFrames(id, startAt, frames)</a></li><li><a href="#_sub88" class="code">function id = btkC3DserverRequestNewHandle_p()</a></li><li><a href="#_sub89" class="code">function idx = btkC3DserverCheckHandleID_p(id)</a></li><li><a href="#_sub90" class="code">function res = btkC3DserverCheckHandleValue_p(idx)</a></li><li><a href="#_sub91" class="code">function [h, idx] = btkC3DserverExtractHandle_p(id)</a></li><li><a href="#_sub92" class="code">function btkC3DserverSetModified_p(idx, s)</a></li><li><a href="#_sub93" class="code">function [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)</a></li><li><a href="#_sub94" class="code">function parameter = btkC3DserverGetCopiedParameter_p(idx)</a></li><li><a href="#_sub95" class="code">function btkC3DserverModifyCopiedParameter_p(idx, field, value, item)</a></li><li><a href="#_sub96" class="code">function [scale, offset, label, description, gain] = btkC3DserverExtractAnalogInfos_p(h,index)</a></li><li><a href="#_sub97" class="code">function [h, frames] = btkC3DserverCheckFPInputs_p(id, component, cord, fp, startFrame, endFrame)</a></li><li><a href="#_sub98" class="code">function btkC3DserverAddMetaData_p(h, varargin)</a></li><li><a href="#_sub99" class="code">function num = btkC3DserverGetEventNumber_p(h,idx)</a></li><li><a href="#_sub100" class="code">function index_ = btkC3DserverGetEventIndex_p(index,idx)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function itf = btkEmulateC3Dserver()</a>
0002 <span class="comment">%BTKEMULATEC3DSERVER Creates an emulated COM object for C3Dserver.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%  ITF = BTKEMULATEC3DSERVER() returns a structure which emulates the COM</span>
0005 <span class="comment">%  object generated by the function 'actxserver('C3Dserver.C3D')'. So, it gives</span>
0006 <span class="comment">%  the possibility to run scripts which use C3Dserver by using BTK.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%  However, BTK did't make the same choice than C3Dserver to extract C3D</span>
0009 <span class="comment">%  informations. Then, you will find some slight differences between both:</span>
0010 <span class="comment">%    - This emulation use function handles and then required for every</span>
0011 <span class="comment">%      functions to be used with parenthesis (you cannot call 'itf.Close'</span>
0012 <span class="comment">%      but 'itf.Close()'). Use parenthesis keep your code compatible with</span>
0013 <span class="comment">%      C3Dserver.</span>
0014 <span class="comment">%    - A C3D file is always opened in mode 3.</span>
0015 <span class="comment">%    - The event's status is not kept in BTK. Using the following code:</span>
0016 <span class="comment">%      'itf.SetEventStatus(0,'0')' sends a warning and do nothing. To remove</span>
0017 <span class="comment">%      the warning, you have to add this command:</span>
0018 <span class="comment">%      'warning('OFF','btk:C3Dserver:SetEventStatus')'</span>
0019 <span class="comment">%    - The group and parameter number are generated from the index instead</span>
0020 <span class="comment">%      of using the ID stored in the C3D file. Like that, the user doesn't</span>
0021 <span class="comment">%      need to manage this number. So, if you set the group or parameter</span>
0022 <span class="comment">%      number, a warning will inform you of the impossibility to do it. To</span>
0023 <span class="comment">%      remove this warning, type the following command:</span>
0024 <span class="comment">%      'warning('OFF','btk:C3Dserver:UniqueNumber')'</span>
0025 <span class="comment">%      Removing this warning has an effect on the functions</span>
0026 <span class="comment">%      SetGroupNumber, SetParameterNumber. But also on the function AddGroup</span>
0027 <span class="comment">%      when you set manually the number.</span>
0028 <span class="comment">%    - The function 'CompressParameterBlocks' is alway activated in BTK as the</span>
0029 <span class="comment">%      the number of blocks needed for the groups/parameters is automatically</span>
0030 <span class="comment">%      adapted when you write the C3D. Trying to deactivate the compression</span>
0031 <span class="comment">%      (by using CompressParameterBlocks(0)) will send a warning. To remove the</span>
0032 <span class="comment">%      warning, you have to add the command:</span>
0033 <span class="comment">%      'warning('OFF','btk:C3Dserver:CompressParameterBlocks')'.</span>
0034 <span class="comment">%    - If some groups and parameters has the same name in the C3D file (which</span>
0035 <span class="comment">%      is the case with the group PROCESSING and its parameter for C3D files</span>
0036 <span class="comment">%      generated with Vicon Nexus 1.4), then BTK removes the duplication</span>
0037 <span class="comment">%      (which is not the case of C3Dserver).</span>
0038 <span class="comment">%    - When you delete a group, it is not possible to keep the associated</span>
0039 <span class="comment">%      parameters (They are stored in the group). If you try to do it, then</span>
0040 <span class="comment">%      a warning will be displayed and the parameters are removed. To remove the</span>
0041 <span class="comment">%      warning, use the command: 'warning('OFF','btk:C3Dserver:DeleteGroup')'.</span>
0042 <span class="comment">%    - The parameters are sorted by groups. Then if you select parameter by</span>
0043 <span class="comment">%      using hardcoded indices, you could have unexpected results.</span>
0044 <span class="comment">%    - The parameters' values are managed automatically inside BTK. In the</span>
0045 <span class="comment">%      case of parameter with the type 'Char', BTK trims (remove leading and</span>
0046 <span class="comment">%      trailing white space) values when you open the C3D file. If you set</span>
0047 <span class="comment">%      a number in a parameter with the type Char, then the number is</span>
0048 <span class="comment">%      converted into a string.</span>
0049 <span class="comment">%    - When you modify the parameter's type, then BTK adapts its values. In</span>
0050 <span class="comment">%      lots of conversion you can come back to the original value. However,</span>
0051 <span class="comment">%      transforming a string which doesn't contain a number creates the</span>
0052 <span class="comment">%      value 0. If you convert a Real into an Integer, you lost the</span>
0053 <span class="comment">%      floating information. If you convert an Integer into a Byte and the</span>
0054 <span class="comment">%      value is not in the range [-128, 127], then you lost the most</span>
0055 <span class="comment">%      significant part of the number.</span>
0056 <span class="comment">%      For example, the conversion (Char-&gt;Integer) for 'FOO' creates the</span>
0057 <span class="comment">%      number 0. But the conversion (Char-&gt;Integer) for '1234' creates the</span>
0058 <span class="comment">%      number 1234. The conversion (Integer-&gt;Byte) for the number 12456</span>
0059 <span class="comment">%      creates the number 168.</span>
0060 <span class="comment">%    - Modifying the parameter's type, adapts also its dimensions.</span>
0061 <span class="comment">%      For example, transforming a integer parameter into a char parameter</span>
0062 <span class="comment">%      add 1 dimension corresponding to the number of characters. Or, in</span>
0063 <span class="comment">%      the other case, transforming a char parameter into an integer,</span>
0064 <span class="comment">%      remove.</span>
0065 <span class="comment">%    - Retrieving a parameter in another index than the original will keep</span>
0066 <span class="comment">%      the group for this index.</span>
0067 <span class="comment">%    - Trying to retrieve a parameter which has the same name than one in</span>
0068 <span class="comment">%      the destination group (other than the original group) will throw an</span>
0069 <span class="comment">%      error.</span>
0070 <span class="comment">%    - An AV ratio equal to 0 in BTK is automatically converted to 1. The</span>
0071 <span class="comment">%      number of analog frames is at least equal to the number of video</span>
0072 <span class="comment">%      frames.</span>
0073 <span class="comment">%    - Starting with BTK 0.2, the camera mask is no longer supported. Trying</span>
0074 <span class="comment">%      to extract or set a mask will display a warning. The returned masks</span>
0075 <span class="comment">%      from the functions GetPointMask and GetPointMaskEx are fake masks and</span>
0076 <span class="comment">%      always set to '0000000'. To remove the warning, you have to add</span>
0077 <span class="comment">%      the command: 'warning('OFF','btk:C3Dserver:FakeMask')'.</span>
0078 
0079 <span class="comment">%  Author: A. Barr</span>
0080 <span class="comment">%  Copyright 2009-2013 Biomechanical ToolKit (BTK).</span>
0081 
0082 <span class="comment">%  TODO:</span>
0083 <span class="comment">%    - How to set parameter's values with the type 'Char'?</span>
0084 <span class="comment">%    - What is the syntax to add frames other than using -1 and -2?</span>
0085 <span class="comment">%    - Check for the btkGetForceData (remove offset part)</span>
0086 <span class="comment">%    - Check for the btkGetMomentData (remove offset, in the global frame)</span>
0087 
0088 <span class="comment">%  HISTORY:</span>
0089 <span class="comment">%    - 13/12/28: btkEmulateC3Dserver 1.0 beta 4 released with BTK 0.3</span>
0090 <span class="comment">%        - Default groups/parameters are now generated within the command NewFile.</span>
0091 <span class="comment">%        - The writing of a C3D file relies now on the informations stored in the</span>
0092 <span class="comment">%          existing groups/parameters as C3Dserver does (instead of the default</span>
0093 <span class="comment">%          behavior of BTK which regenerate groups/parameters from acquisition data).</span>
0094 <span class="comment">%        - Events are correctly saved in the C3D header section.</span>
0095 <span class="comment">%        - Emulation of some commands improved to speedup them.</span>
0096 <span class="comment">%        - Generation of the internal ID fixed when btkEmulateC3Dserver is called</span>
0097 <span class="comment">%          more than once in the same function.</span>
0098 <span class="comment">%    - 12/08/30: btkEmulateC3Dserver 1.0 beta 3 released with BTK 0.2</span>
0099 <span class="comment">%        - Code updated to remove all the BTK functions related to the camera mask</span>
0100 <span class="comment">%          as this information was removed from BTK 0.2.</span>
0101 <span class="comment">%    - 12/04/11: btkEmulateC3Dserver 1.0 beta 2 released with BTK 0.1.10</span>
0102 <span class="comment">%        - Implementation errors in the function SaveFile for the C3Dserver emulation.</span>
0103 <span class="comment">%    - 11/06/28: Initial public beta</span>
0104 
0105 <span class="comment">% Construct the emulated COM object by using function handles.</span>
0106 id = <a href="#_sub88" class="code" title="subfunction id = btkC3DserverRequestNewHandle_p()">btkC3DserverRequestNewHandle_p</a>();
0107 itf.GetRegistrationMode = 2; <span class="comment">% Register mode (full speed)</span>
0108 itf.GetRegUserName = <span class="string">'Free Emulation Copy'</span>;
0109 itf.GetRegUserOrganization = <span class="string">'Biomechanical ToolKit (BTK)'</span>;
0110 itf.GetVersion = sprintf(<span class="string">'C3D Server Emulator 1.0 (beta 4) - BTK version %s, compatible C3Dserver 1.144.0'</span>, <a href="btkGetVersion.html" class="code" title="function v = btkGetVersion()">btkGetVersion</a>());
0111 itf.GetHandle = @()<a href="#_sub1" class="code" title="subfunction h = btkC3DserverGetHandle(id)">btkC3DserverGetHandle</a>(id);
0112 itf.Open = @(filename,mode)<a href="#_sub2" class="code" title="subfunction res = btkC3DserverOpen(id, filename, mode)">btkC3DserverOpen</a>(id,filename,mode);
0113 itf.Close = @()<a href="#_sub3" class="code" title="subfunction btkC3DserverClose(id)">btkC3DserverClose</a>(id);
0114 itf.NewFile = @(file, fileType, dataType, numAnalog, avRatio, numMarkers, frequencyRate, scalingFactor, numFrames)<a href="#_sub4" class="code" title="subfunction res = btkC3DserverNewFile(id, file, fileType, dataType, numAnalog, avRatio, numMarkers, frequencyRate, scalingFactor, numFrames)">btkC3DserverNewFile</a>(id, file, fileType, dataType, numAnalog, avRatio, numMarkers, frequencyRate, scalingFactor, numFrames);
0115 itf.IsModified = @()<a href="#_sub5" class="code" title="subfunction res = btkC3DserverIsModified(id)">btkC3DserverIsModified</a>(id);
0116 itf.SaveFile = @(filename, fileType)<a href="#_sub6" class="code" title="subfunction res = btkC3DserverSaveFile(id, filename, fileType)">btkC3DserverSaveFile</a>(id, filename, fileType);
0117 itf.GetNumber3DPoints = @()<a href="#_sub7" class="code" title="subfunction num = btkC3DserverGetNumber3DPoints(id)">btkC3DserverGetNumber3DPoints</a>(id);
0118 itf.GetAnalogChannels = @()<a href="#_sub8" class="code" title="subfunction num = btkC3DserverGetAnalogChannels(id)">btkC3DserverGetAnalogChannels</a>(id);
0119 itf.GetVideoFrameHeader = @(startEnd)<a href="#_sub9" class="code" title="subfunction num = btkC3DserverGetVideoFrame(id,startEnd)">btkC3DserverGetVideoFrame</a>(id, startEnd); <span class="comment">% Give the same result than the function GetVideoFrame (in BTK, a C3D is transformed in an acquisition object)</span>
0120 itf.GetVideoFrame = @(startEnd)<a href="#_sub9" class="code" title="subfunction num = btkC3DserverGetVideoFrame(id,startEnd)">btkC3DserverGetVideoFrame</a>(id, startEnd);
0121 itf.GetMaxInterpolationGap = @()<a href="#_sub10" class="code" title="subfunction num = btkC3DserverGetMaxInterpolationGap(id)">btkC3DserverGetMaxInterpolationGap</a>(id); <span class="comment">% Fake result as BTK doesn't save this value</span>
0122 itf.SetMaxInterpolationGap = @(maxInterGap)<a href="#_sub11" class="code" title="subfunction res = btkC3DserverSetMaxInterpolationGap(id, maxInterGap)">btkC3DserverSetMaxInterpolationGap</a>(id, maxInterGap); <span class="comment">% Do nothing</span>
0123 itf.GetHeaderScaleFactor = @()<a href="#_sub12" class="code" title="subfunction scale = btkC3DserverGetHeaderScaleFactor(id)">btkC3DserverGetHeaderScaleFactor</a>(id); <span class="comment">% Return the value stored in POINT:SCALE</span>
0124 itf.GetStartingRecord = @()<a href="#_sub13" class="code" title="subfunction num = btkC3DserverGetStartingRecord(id)">btkC3DserverGetStartingRecord</a>(id);
0125 itf.GetAnalogVideoRatio = @()<a href="#_sub14" class="code" title="subfunction ratio = btkC3DserverGetAnalogVideoRatio(id)">btkC3DserverGetAnalogVideoRatio</a>(id);
0126 itf.GetVideoFrameRate = @()<a href="#_sub15" class="code" title="subfunction f = btkC3DserverGetVideoFrameRate(id)">btkC3DserverGetVideoFrameRate</a>(id);
0127 itf.GetFileType = @()<a href="#_sub16" class="code" title="subfunction type = btkC3DserverGetFileType(id)">btkC3DserverGetFileType</a>(id);
0128 itf.GetDataType = @()<a href="#_sub17" class="code" title="subfunction type = btkC3DserverGetDataType(id)">btkC3DserverGetDataType</a>(id);
0129 itf.GetNumberEvents = @()<a href="#_sub18" class="code" title="subfunction num = btkC3DserverGetNumberEvents(id)">btkC3DserverGetNumberEvents</a>(id);
0130 itf.GetEventTime = @(index)<a href="#_sub19" class="code" title="subfunction time = btkC3DserverGetEventTime(id, index)">btkC3DserverGetEventTime</a>(id, index);
0131 itf.GetEventLabel = @(index)<a href="#_sub20" class="code" title="subfunction label = btkC3DserverGetEventLabel(id, index)">btkC3DserverGetEventLabel</a>(id, index);
0132 itf.GetEventStatus = @(index)<a href="#_sub21" class="code" title="subfunction status = btkC3DserverGetEventStatus(id, index)">btkC3DserverGetEventStatus</a>(id, index);
0133 itf.AddEvent = @(label, status, time)<a href="#_sub22" class="code" title="subfunction res = btkC3DserverAddEvent(id, label, status, time)">btkC3DserverAddEvent</a>(id, label, status, time);
0134 itf.SetEventLabel = @(index, label)<a href="#_sub23" class="code" title="subfunction res = btkC3DserverSetEventLabel(id, index, label)">btkC3DserverSetEventLabel</a>(id, index, label);
0135 itf.SetEventTime = @(index, time)<a href="#_sub24" class="code" title="subfunction res = btkC3DserverSetEventTime(id, index, time)">btkC3DserverSetEventTime</a>(id, index, time);
0136 itf.SetEventStatus = @(index, status)<a href="#_sub25" class="code" title="subfunction res = btkC3DserverSetEventStatus(id, index, status)">btkC3DserverSetEventStatus</a>(id, index, status);
0137 itf.DeleteEvent = @(index)<a href="#_sub26" class="code" title="subfunction res = btkC3DserverDeleteEvent(id, index)">btkC3DserverDeleteEvent</a>(id, index);
0138 itf.SetStrictParameterChecking = @(value)<a href="#_sub27" class="code" title="subfunction btkC3DserverSetStrictParameterChecking(id, value)">btkC3DserverSetStrictParameterChecking</a>(id, value);
0139 itf.CompressParameterBlocks = @(compress)<a href="#_sub28" class="code" title="subfunction btkCompressParameterBlocks(id, compress)">btkCompressParameterBlocks</a>(id, compress);
0140 itf.GetNumberGroups = @()<a href="#_sub29" class="code" title="subfunction num = btkC3DserverGetNumberGroups(id)">btkC3DserverGetNumberGroups</a>(id);
0141 itf.GetGroupIndex = @(label)<a href="#_sub30" class="code" title="subfunction index = btkC3DserverGetGroupIndex(id, label)">btkC3DserverGetGroupIndex</a>(id, label);
0142 itf.GetGroupName = @(index)<a href="#_sub31" class="code" title="subfunction name = btkC3DserverGetGroupName(id, index)">btkC3DserverGetGroupName</a>(id, index);
0143 itf.GetGroupNumber = @(index)<a href="#_sub32" class="code" title="subfunction num = btkC3DserverGetGroupNumber(id, index)">btkC3DserverGetGroupNumber</a>(id, index);
0144 itf.GetGroupLock = @(index)<a href="#_sub33" class="code" title="subfunction locked = btkC3DserverGetGroupLock(id, index)">btkC3DserverGetGroupLock</a>(id, index);
0145 itf.GetGroupDescription = @(index)<a href="#_sub34" class="code" title="subfunction desc = btkC3DserverGetGroupDescription(id, index)">btkC3DserverGetGroupDescription</a>(id, index);
0146 itf.SetGroupName = @(index, name)<a href="#_sub35" class="code" title="subfunction res = btkC3DserverSetGroupName(id, index, name)">btkC3DserverSetGroupName</a>(id, index, name);
0147 itf.SetGroupNumber = @(index, num)<a href="#_sub36" class="code" title="subfunction res = btkC3DserverSetGroupNumber(id, index, num)">btkC3DserverSetGroupNumber</a>(id, index, num);
0148 itf.SetGroupDescription = @(index, desc)<a href="#_sub37" class="code" title="subfunction res = btkC3DserverSetGroupDescription(id, index, desc)">btkC3DserverSetGroupDescription</a>(id, index, desc);
0149 itf.SetGroupLock = @(index, locked)<a href="#_sub38" class="code" title="subfunction res = btkC3DserverSetGroupLock(id, index, locked)">btkC3DserverSetGroupLock</a>(id, index, locked);
0150 itf.AddGroup = @(num, name, desc, locked)<a href="#_sub39" class="code" title="subfunction res = btkC3DserverAddGroup(id, num, name, desc, locked)">btkC3DserverAddGroup</a>(id, num, name, desc, locked);
0151 itf.DeleteGroup = @(index, deleteParameters)<a href="#_sub40" class="code" title="subfunction res = btkC3DserverDeleteGroup(id, index, deleteParameters)">btkC3DserverDeleteGroup</a>(id, index, deleteParameters);
0152 itf.GetNumberParameters = @()<a href="#_sub41" class="code" title="subfunction num = btkC3DserverGetNumberParameters(id)">btkC3DserverGetNumberParameters</a>(id);
0153 itf.GetParameterIndex = @(groupLabel, paramLabel)<a href="#_sub42" class="code" title="subfunction index = btkC3DserverGetParameterIndex(id, groupLabel, paramLabel)">btkC3DserverGetParameterIndex</a>(id, groupLabel, paramLabel);
0154 itf.GetParameterName = @(index)<a href="#_sub43" class="code" title="subfunction name = btkC3DserverGetParameterName(id, index)">btkC3DserverGetParameterName</a>(id, index);
0155 itf.GetParameterNumber = @(index)<a href="#_sub44" class="code" title="subfunction num = btkC3DserverGetParameterNumber(id, index)">btkC3DserverGetParameterNumber</a>(id, index);
0156 itf.GetParameterLock = @(index)<a href="#_sub45" class="code" title="subfunction locked = btkC3DserverGetParameterLock(id, index)">btkC3DserverGetParameterLock</a>(id, index);
0157 itf.GetParameterDescription = @(index)<a href="#_sub46" class="code" title="subfunction description = btkC3DserverGetParameterDescription(id, index)">btkC3DserverGetParameterDescription</a>(id, index);
0158 itf.GetParameterType = @(index)<a href="#_sub47" class="code" title="subfunction t = btkC3DserverGetParameterType(id, index)">btkC3DserverGetParameterType</a>(id, index);
0159 itf.GetParameterNumberDim = @(index)<a href="#_sub48" class="code" title="subfunction num = btkC3DserverGetParameterNumberDim(id, index)">btkC3DserverGetParameterNumberDim</a>(id, index);
0160 itf.GetParameterDimension = @(index, dim)<a href="#_sub49" class="code" title="subfunction num = btkC3DserverGetParameterDimension(id, index, dim)">btkC3DserverGetParameterDimension</a>(id, index, dim);
0161 itf.GetParameterLength = @(index)<a href="#_sub50" class="code" title="subfunction num = btkC3DserverGetParameterLength(id, index)">btkC3DserverGetParameterLength</a>(id, index);
0162 itf.GetParameterValue = @(index, value)<a href="#_sub51" class="code" title="subfunction value = btkC3DserverGetParameterValue(id, index, item)">btkC3DserverGetParameterValue</a>(id, index, value);
0163 itf.SetParameterName = @(index, name)<a href="#_sub52" class="code" title="subfunction res = btkC3DserverSetParameterName(id, index, name)">btkC3DserverSetParameterName</a>(id, index, name);
0164 itf.SetParameterNumber = @(index, num)<a href="#_sub53" class="code" title="subfunction res = btkC3DserverSetParameterNumber(id, index, num)">btkC3DserverSetParameterNumber</a>(id, index, num);
0165 itf.SetParameterLock = @(index, locked)<a href="#_sub54" class="code" title="subfunction res = btkC3DserverSetParameterLock(id, index, locked)">btkC3DserverSetParameterLock</a>(id, index, locked);
0166 itf.SetParameterDescription = @(index, desc)<a href="#_sub55" class="code" title="subfunction res = btkC3DserverSetParameterDescription(id, index, desc)">btkC3DserverSetParameterDescription</a>(id, index, desc);
0167 itf.SetParameterType = @(index, t)<a href="#_sub56" class="code" title="subfunction res = btkC3DserverSetParameterType(id, index, t)">btkC3DserverSetParameterType</a>(id, index, t);
0168 itf.SetParameterValue = @(index, item, value)<a href="#_sub57" class="code" title="subfunction res = btkC3DserverSetParameterValue(id, index, item, value)">btkC3DserverSetParameterValue</a>(id, index, item, value);
0169 itf.AddParameter = @(name, desc, group, locked, t, numDim, dimList, data)<a href="#_sub58" class="code" title="subfunction res = btkC3DserverAddParameter(id, name, desc, group, locked, t, numDim, dimList, data)">btkC3DserverAddParameter</a>(id, name, desc, group, locked, t, numDim, dimList, data);
0170 itf.DeleteParameter = @(index)<a href="#_sub59" class="code" title="subfunction res = btkC3DserverDeleteParameter(id, index)">btkC3DserverDeleteParameter</a>(id, index);
0171 itf.CopyParameter = @(index)<a href="#_sub60" class="code" title="subfunction res = btkC3DserverCopyParameter(id, index)">btkC3DserverCopyParameter</a>(id, index);
0172 itf.RetrieveParameter = @(index)<a href="#_sub61" class="code" title="subfunction res = btkC3DserverRetrieveParameter(id, index)">btkC3DserverRetrieveParameter</a>(id, index);
0173 itf.RemoveParameterData = @(index, item)<a href="#_sub62" class="code" title="subfunction res = btkC3DserverRemoveParameterData(id, index, item)">btkC3DserverRemoveParameterData</a>(id, index, item);
0174 itf.AddParameterData = @(index, items)<a href="#_sub63" class="code" title="subfunction res = btkC3DserverAddParameterData(id, index, items)">btkC3DserverAddParameterData</a>(id, index, items);
0175 itf.GetAnalogData = @(channel, frame, subFrame, scaled, offset, scale, useScale)<a href="#_sub64" class="code" title="subfunction data = btkC3DserverGetAnalogData(id, channel, frame, subFrame, scaled, offset, scale, useScale)">btkC3DserverGetAnalogData</a>(id, channel, frame, subFrame, scaled, offset, scale, useScale);
0176 itf.GetAnalogDataEx = @(channel, startFrame, endFrame, scaled, offset, scale, useScale)<a href="#_sub65" class="code" title="subfunction data = btkC3DserverGetAnalogDataEx(id, channel, startFrame, endFrame, scaled, offset, scale, useScale)">btkC3DserverGetAnalogDataEx</a>(id, channel, startFrame, endFrame, scaled, offset, scale, useScale);
0177 itf.SetAnalogData = @(channel, frame, subFrame, data)<a href="#_sub66" class="code" title="subfunction res = btkC3DserverSetAnalogData(id, channel, frame, subFrame, data)">btkC3DserverSetAnalogData</a>(id, channel, frame, subFrame, data);
0178 itf.SetAnalogDataEx = @(channel, frame, data)<a href="#_sub67" class="code" title="subfunction res = btkC3DserverSetAnalogDataEx(id, channel, frame, data)">btkC3DserverSetAnalogDataEx</a>(id, channel, frame, data);
0179 itf.SetAVRatio = @(avRatio)<a href="#_sub68" class="code" title="subfunction res = btkC3DserverSetAVRatio(id, avRatio)">btkC3DserverSetAVRatio</a>(id, avRatio);
0180 itf.AddAnalogChannel = @()<a href="#_sub69" class="code" title="subfunction index = btkC3DserverAddAnalogChannel(id)">btkC3DserverAddAnalogChannel</a>(id);
0181 itf.DeleteAnalogChannel = @(index)<a href="#_sub70" class="code" title="subfunction res = btkC3DserverDeleteAnalogChannel(id, index)">btkC3DserverDeleteAnalogChannel</a>(id, index);
0182 itf.DeleteAnalogChannelWithParam = @(index)<a href="#_sub71" class="code" title="subfunction res = btkC3DserverDeleteAnalogChannelWithParameter(id, index)">btkC3DserverDeleteAnalogChannelWithParameter</a>(id, index);
0183 itf.DeleteAnalogChannelWithParameter = @(index)<a href="#_sub71" class="code" title="subfunction res = btkC3DserverDeleteAnalogChannelWithParameter(id, index)">btkC3DserverDeleteAnalogChannelWithParameter</a>(id, index);
0184 itf.GetForceData = @(cord, fp, startFrame, endFrame)<a href="#_sub72" class="code" title="subfunction data = btkC3DserverGetForceData(id, cord, fp, startFrame, endFrame)">btkC3DserverGetForceData</a>(id, cord, fp, startFrame, endFrame);
0185 itf.GetMomentData = @(cord, fp, startFrame, endFrame)<a href="#_sub73" class="code" title="subfunction data = btkC3DserverGetMomentData(id, cord, fp, startFrame, endFrame)">btkC3DserverGetMomentData</a>(id, cord, fp, startFrame, endFrame);
0186 itf.ZeroAnalogChannel = @(channel, method, frames)<a href="#_sub74" class="code" title="subfunction res = btkC3DserverZeroAnalogChannel(id, channel, method, frames)">btkC3DserverZeroAnalogChannel</a>(id, channel, method, frames);
0187 itf.GetPointData = @(channel, cord, frame, scaled)<a href="#_sub75" class="code" title="subfunction data = btkC3DserverGetPointData(id, channel, cord, frame, scaled)">btkC3DserverGetPointData</a>(id, channel, cord, frame, scaled);
0188 itf.GetPointDataEx = @(channel, cord, startFrame, endFrame, scaled)<a href="#_sub76" class="code" title="subfunction data = btkC3DserverGetPointDataEx(id, channel, cord, startFrame, endFrame, scaled)">btkC3DserverGetPointDataEx</a>(id, channel, cord, startFrame, endFrame, scaled);
0189 itf.GetPointResidualEx = @(channel, startFrame, endFrame)<a href="#_sub77" class="code" title="subfunction data = btkC3DserverGetPointResidualEx(id, channel, startFrame, endFrame)">btkC3DserverGetPointResidualEx</a>(id, channel, startFrame, endFrame);
0190 itf.GetPointResidual = @(channel, frame)<a href="#_sub78" class="code" title="subfunction data = btkC3DserverGetPointResidual(id, channel, frame)">btkC3DserverGetPointResidual</a>(id, channel, frame);
0191 itf.GetPointMask = @(channel, frame)<a href="#_sub79" class="code" title="subfunction data = btkC3DserverGetPointMask(id, channel, frame)">btkC3DserverGetPointMask</a>(id, channel, frame);
0192 itf.GetPointMaskEx = @(channel, startFrame, endFrame)<a href="#_sub80" class="code" title="subfunction data = btkC3DserverGetPointMaskEx(id, channel, startFrame, endFrame)">btkC3DserverGetPointMaskEx</a>(id, channel, startFrame, endFrame);
0193 itf.SetPointData = @(channel, cord, frame, data)<a href="#_sub81" class="code" title="subfunction res = btkC3DserverSetPointData(id, channel, cord, frame, data)">btkC3DserverSetPointData</a>(id, channel, cord, frame, data);
0194 itf.SetPointDataEx = @(channel, cord, frame, data)<a href="#_sub82" class="code" title="subfunction res = btkC3DserverSetPointDataEx(id, channel, cord, frame, data)">btkC3DserverSetPointDataEx</a>(id, channel, cord, frame, data);
0195 itf.AddMarker = @()<a href="#_sub83" class="code" title="subfunction index = btkC3DserverAddMarker(id)">btkC3DserverAddMarker</a>(id);
0196 itf.DeleteMarker = @(index)<a href="#_sub84" class="code" title="subfunction res = btkC3DserverDeleteMarker(id, index)">btkC3DserverDeleteMarker</a>(id, index);
0197 itf.DeleteMarkerWithParam = @(index)<a href="#_sub85" class="code" title="subfunction res = btkC3DserverDeleteMarkerWithParameter(id, index)">btkC3DserverDeleteMarkerWithParameter</a>(id, index);
0198 itf.DeleteMarkerWithParameter = @(index)<a href="#_sub85" class="code" title="subfunction res = btkC3DserverDeleteMarkerWithParameter(id, index)">btkC3DserverDeleteMarkerWithParameter</a>(id, index);
0199 itf.AddFrames = @(frames, insertAt)<a href="#_sub86" class="code" title="subfunction num = btkC3DserverAddFrames(id, frames, insertAt)">btkC3DserverAddFrames</a>(id, frames, insertAt);
0200 itf.DeleteFrames = @(startAt, numFrames)<a href="#_sub87" class="code" title="subfunction num = btkC3DserverDeleteFrames(id, startAt, frames)">btkC3DserverDeleteFrames</a>(id, startAt, numFrames);
0201 
0202 
0203 <span class="comment">% -------------------------------------------------------------------------</span>
0204 <span class="comment">% Public functions to extract BTK data</span>
0205 <span class="comment">% -------------------------------------------------------------------------</span>
0206 
0207 <span class="comment">% Return the associated acquisition's handle</span>
0208 <a name="_sub1" href="#_subfunctions" class="code">function h = btkC3DserverGetHandle(id)</a>
0209 <span class="keyword">global</span> btkC3DserverHandles;
0210 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0211 h = btkC3DserverHandles(idx).handle;
0212 
0213 
0214 <span class="comment">% -------------------------------------------------------------------------</span>
0215 <span class="comment">% Public functions to emulate the methods in the COM object</span>
0216 <span class="comment">% -------------------------------------------------------------------------</span>
0217 
0218 <span class="comment">% The input mode has no effect in our case</span>
0219 <a name="_sub2" href="#_subfunctions" class="code">function res = btkC3DserverOpen(id, filename, mode)</a>
0220 <span class="keyword">global</span> btkC3DserverHandles;
0221 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0222 <span class="keyword">try</span>
0223     <span class="keyword">if</span> (<a href="#_sub90" class="code" title="subfunction res = btkC3DserverCheckHandleValue_p(idx)">btkC3DserverCheckHandleValue_p</a>(idx) == 0)
0224         <a href="../../../Functions/BTK/linux64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>(btkC3DserverHandles(idx).handle);
0225     <span class="keyword">end</span>
0226     <span class="comment">% Handle</span>
0227     warning(<span class="string">'off'</span>, <span class="string">'btk:ReadAcquisition'</span>);
0228     [btkC3DserverHandles(idx).handle, bo, sf] = <a href="../../../Functions/BTK/linux64/@IO/btkReadAcquisition.html" class="code" title="function h = btkReadAcquisition(filename) %#ok">btkReadAcquisition</a>(filename);
0229     warning(<span class="string">'on'</span>, <span class="string">'btk:ReadAcquisition'</span>);
0230     pointScale = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(btkC3DserverHandles(idx).handle,<span class="string">'POINT'</span>,<span class="string">'SCALE'</span>);
0231     btkC3DserverHandles(idx).scalingFactor = pointScale.info.values(1);
0232     <span class="comment">% File type</span>
0233     <span class="keyword">switch</span> bo
0234         <span class="keyword">case</span> <span class="string">'IEEE_LittleEndian'</span>
0235             btkC3DserverHandles(idx).fileType = 1;
0236         <span class="keyword">case</span> <span class="string">'VAX_LittleEndian'</span>
0237             btkC3DserverHandles(idx).fileType = 2;
0238         <span class="keyword">case</span> <span class="string">'IEEE_BiEndian'</span>
0239             btkC3DserverHandles(idx).fileType = 3;
0240     <span class="keyword">end</span>
0241     <span class="comment">% Data type</span>
0242     <span class="keyword">switch</span> sf
0243         <span class="keyword">case</span> <span class="string">'Integer'</span>
0244             btkC3DserverHandles(idx).dataType = 1;
0245         <span class="keyword">case</span> <span class="string">'Float'</span>
0246             btkC3DserverHandles(idx).dataType = 2;
0247     <span class="keyword">end</span>
0248     res = 0; <span class="comment">% File read</span>
0249     btkC3DserverHandles(idx).file = filename;
0250     btkC3DserverHandles(idx).modified = 0; <span class="comment">% Reset</span>
0251     btkC3DserverHandles(idx).parameterIndexMapping = {};
0252     btkC3DserverHandles(idx).copiedParameter = 0;
0253     <span class="comment">% Extra: The events in the EVENT group are not included by C3Dserver but BTK does</span>
0254     <span class="comment">%        The emulation tries to hide them instead of removing them in the case</span>
0255     <span class="comment">%        the user mix C3Dserver and native BTK code.</span>
0256     eventUsed = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(btkC3DserverHandles(idx).handle,<span class="string">'EVENT'</span>,<span class="string">'USED'</span>);
0257     <span class="keyword">if</span> (~isstruct(eventUsed))
0258         eventUsed = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(btkC3DserverHandles(idx).handle,<span class="string">'EVENTS'</span>,<span class="string">'USED'</span>);
0259     <span class="keyword">end</span>
0260     <span class="keyword">if</span> (isstruct(eventUsed))
0261         num = eventUsed.info.values(1);
0262         first = <a href="btkGetEventNumber.html" class="code" title="function num = btkGetEventNumber(h)">btkGetEventNumber</a>(btkC3DserverHandles(idx).handle) - num + 1;
0263         btkC3DserverHandles(idx).hiddenParameterEvents = [first,num];
0264     <span class="keyword">end</span>
0265 <span class="keyword">catch</span>
0266     err = lasterror();
0267     error(<span class="string">'btk:C3Dserver'</span>,[<span class="string">'Internal error: '</span> , err.message]);
0268 <span class="keyword">end</span>
0269 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(btkC3DserverHandles(idx).handle);
0270 num = 0;
0271 <span class="keyword">if</span> (isstruct(md.children))
0272     labels = fieldnames(md.children);
0273     <span class="keyword">for</span> i = 1:size(labels,1)
0274         children = md.children.(labels{i}).children;
0275         <span class="keyword">if</span> isstruct(children)
0276             labels_ = fieldnames(children);
0277             <span class="keyword">for</span> j = 1:size(labels_,1)
0278                 btkC3DserverHandles(idx).parameterIndexMapping(end+1,:) = {[i,j],num};
0279                 num = num + 1;
0280             <span class="keyword">end</span>
0281         <span class="keyword">end</span>
0282     <span class="keyword">end</span>
0283 <span class="keyword">end</span>
0284 
0285 
0286 <a name="_sub3" href="#_subfunctions" class="code">function btkC3DserverClose(id)</a>
0287 <span class="keyword">global</span> btkC3DserverHandles;
0288 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0289 res = <a href="#_sub90" class="code" title="subfunction res = btkC3DserverCheckHandleValue_p(idx)">btkC3DserverCheckHandleValue_p</a>(idx);
0290 <span class="keyword">if</span> (res == 0)
0291     <a href="../../../Functions/BTK/linux64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>(btkC3DserverHandles(idx).handle);
0292     btkC3DserverHandles(idx).handle = NaN;
0293     btkC3DserverHandles(idx).file = <span class="string">''</span>;
0294     btkC3DserverHandles(idx).scalingFactor = 1;
0295 <span class="keyword">end</span>
0296 
0297 
0298 <a name="_sub4" href="#_subfunctions" class="code">function res = btkC3DserverNewFile(id, file, fileType, dataType, numAnalog, avRatio, numMarkers, frequencyRate, scalingFactor, numFrames)</a>
0299 <span class="keyword">global</span> btkC3DserverHandles;
0300 <span class="keyword">if</span> ((fileType &lt; 1) || (fileType &gt; 3))
0301     fileType = 1;
0302 <span class="keyword">end</span>
0303 <span class="keyword">if</span> ((dataType &lt; 1) || (dataType &gt; 2))
0304     dataType = 1;
0305 <span class="keyword">end</span>
0306 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0307 <span class="keyword">try</span>
0308     <span class="keyword">if</span> (<a href="#_sub90" class="code" title="subfunction res = btkC3DserverCheckHandleValue_p(idx)">btkC3DserverCheckHandleValue_p</a>(idx) == 0)
0309         <a href="../../../Functions/BTK/linux64/@Common/btkDeleteAcquisition.html" class="code" title="function btkDeleteAcquisition(h) %#ok">btkDeleteAcquisition</a>(btkC3DserverHandles(idx).handle);
0310     <span class="keyword">end</span>
0311     btkC3DserverHandles(idx).handle = <a href="../../../Functions/BTK/linux64/@Common/btkNewAcquisition.html" class="code" title="function h = btkNewAcquisition(pn, fn, an, r) %#ok">btkNewAcquisition</a>(numMarkers, numFrames, numAnalog, avRatio);
0312     btkC3DserverHandles(idx).file = file;
0313     btkC3DserverHandles(idx).fileType = fileType;
0314     btkC3DserverHandles(idx).dataType = dataType;
0315     btkC3DserverHandles(idx).scalingFactor = scalingFactor;
0316     btkC3DserverHandles(idx).modified = 1;
0317     h = btkC3DserverHandles(idx).handle;
0318     <span class="comment">% Add default groups/parameters</span>
0319     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'Analog Parameters'</span>);
0320     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'GEN_SCALE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, 1), <span class="string">'General Scale Factor'</span>);
0321     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'RATE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, avRatio * frequencyRate), <span class="string">'Analog Base Sampling Rate'</span>);
0322     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, numAnalog), <span class="string">'Number of analog channels used'</span>);
0323     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'SCALE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, ones(numAnalog,1)), <span class="string">'Analog scale factors'</span>);
0324     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'OFFSET'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, 2048 * ones(numAnalog,1)), <span class="string">'Analog Offsets'</span>);
0325     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'UNITS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, repmat({<span class="string">''</span>},numAnalog,1)), <span class="string">'Analog units'</span>);
0326     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'LABELS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, cellstr(num2str([1:numAnalog]',<span class="string">'CH%03i'</span>))), <span class="string">'Analog labels'</span>);
0327     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'DESCRIPTIONS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, cellstr(num2str([1:numAnalog]',<span class="string">'Channel %03i'</span>))), <span class="string">'Analog descriptions'</span>);
0328     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'Point Parameters'</span>);
0329     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, numMarkers), <span class="string">'Number of Markers'</span>);
0330     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'FRAMES'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, numFrames), <span class="string">'Number of Video Frames'</span>);
0331     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'DATA_START'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, 10), <span class="string">'Start Record for Data'</span>);
0332     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'SCALE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, scalingFactor), <span class="string">'Scale factor for video data'</span>);
0333     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'RATE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, frequencyRate), <span class="string">'Video sampling rate'</span>);
0334     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'LABELS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, cellstr(num2str([1:numMarkers]',<span class="string">'MK%03i'</span>))), <span class="string">'Marker labels'</span>);
0335     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'POINT'</span>, <span class="string">'DESCRIPTIONS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, cellstr(num2str([1:numMarkers]',<span class="string">'Marker %03i'</span>))), <span class="string">'Point descriptions'</span>);
0336     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'FORCE_PLATFORM'</span>, <span class="string">'Force Platform Parameters'</span>);
0337     <a href="#_sub98" class="code" title="subfunction btkC3DserverAddMetaData_p(h, varargin)">btkC3DserverAddMetaData_p</a>(h, <span class="string">'FORCE_PLATFORM'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, 0), <span class="string">'Number of Force Plates'</span>);
0338     <span class="comment">% Others</span>
0339     <a href="../../../Functions/BTK/linux64/@Common/btkSetFrequency.html" class="code" title="function btkSetFrequency(h, freq) %#ok">btkSetFrequency</a>(h, frequencyRate);
0340     <span class="comment">% File created</span>
0341     res = 1;
0342 <span class="keyword">catch</span>
0343     err = lasterror();
0344     error(<span class="string">'btk:C3Dserver'</span>,[<span class="string">'An error occured during the creation of the file: '''</span>, err.message , <span class="string">''''</span>])
0345 <span class="keyword">end</span>
0346 
0347 
0348 <a name="_sub5" href="#_subfunctions" class="code">function res = btkC3DserverIsModified(id)</a>
0349 <span class="keyword">global</span> btkC3DserverHandles;
0350 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0351 res = char(btkC3DserverHandles(idx).modified);
0352 
0353 
0354 <a name="_sub6" href="#_subfunctions" class="code">function res = btkC3DserverSaveFile(id, filename, fileType)</a>
0355 <span class="keyword">global</span> btkC3DserverHandles;
0356 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0357 <span class="keyword">if</span> (isempty(filename))
0358     filename = btkC3DserverHandles(idx).file;
0359 <span class="keyword">end</span>
0360 <span class="keyword">if</span> (fileType == -1)
0361     fileType = btkC3DserverHandles(idx).fileType;
0362 <span class="keyword">end</span>
0363 <span class="keyword">if</span> ((fileType &lt; 1) || (fileType &gt; 3))
0364     fileType = 1;
0365 <span class="keyword">end</span>
0366 byteorder = {<span class="string">'IEEE_LittleEndian'</span>, <span class="string">'VAX_LittleEndian'</span>, <span class="string">'IEEE_BigEndian'</span>};
0367 storageformat = {<span class="string">'Integer'</span>, <span class="string">'Float'</span>};
0368 <span class="keyword">try</span>
0369     <a href="../../../Functions/BTK/linux64/@IO/btkWriteAcquisition.html" class="code" title="function h = btkWriteAcquisition(filename) %#ok">btkWriteAcquisition</a>(h, filename, <span class="string">'ByteOrder'</span>, byteorder{fileType}, <span class="string">'StorageFormat'</span>, storageformat{btkC3DserverHandles(idx).dataType}, <span class="string">'InternalsUpdate'</span>, <span class="string">'MetaDataBasedUpdate'</span>);
0370     res = 1; <span class="comment">% File wrote</span>
0371 <span class="keyword">catch</span>
0372     err = lasterror();
0373     error(<span class="string">'btk:C3Dserver'</span>,[<span class="string">'An error occured during the saving of the file: '''</span>, err.message , <span class="string">''''</span>])
0374 <span class="keyword">end</span>
0375 
0376 
0377 <a name="_sub7" href="#_subfunctions" class="code">function num = btkC3DserverGetNumber3DPoints(id)</a>
0378 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0379 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h);
0380 
0381 
0382 <a name="_sub8" href="#_subfunctions" class="code">function num = btkC3DserverGetAnalogChannels(id)</a>
0383 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0384 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h);
0385 
0386 
0387 <a name="_sub9" href="#_subfunctions" class="code">function num = btkC3DserverGetVideoFrame(id,startEnd)</a>
0388 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0389 <span class="keyword">if</span> (startEnd == 0)
0390     num = <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h);
0391 <span class="keyword">else</span>
0392     num = <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h);
0393 <span class="keyword">end</span>;
0394 
0395 
0396 <a name="_sub10" href="#_subfunctions" class="code">function num = btkC3DserverGetMaxInterpolationGap(id)</a>
0397 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0398 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetMaxInterpolationGap.html" class="code" title="function gap = btkGetMaxInterpolationGap(h) %#ok">btkGetMaxInterpolationGap</a>(h);
0399 
0400 
0401 <a name="_sub11" href="#_subfunctions" class="code">function res = btkC3DserverSetMaxInterpolationGap(id, maxInterGap)</a>
0402 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0403 <a href="../../../Functions/BTK/linux64/@Common/btkSetMaxInterpolationGap.html" class="code" title="function btkSetMaxInterpolationGap(h, gap) %#ok">btkSetMaxInterpolationGap</a>(h, maxInterGap);
0404 res = 1;
0405 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0406 
0407 
0408 <a name="_sub12" href="#_subfunctions" class="code">function scale = btkC3DserverGetHeaderScaleFactor(id)</a>
0409 <span class="keyword">global</span> btkC3DserverHandles;
0410 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0411 scale = btkC3DserverHandles(idx).scalingFactor;
0412 
0413 
0414 <a name="_sub13" href="#_subfunctions" class="code">function num = btkC3DserverGetStartingRecord(id)</a>
0415 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0416 pointDataStart = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'DATA_START'</span>);
0417 num = 2;
0418 <span class="keyword">if</span> isstruct(pointDataStart)
0419     num = pointDataStart.info.values(1);
0420 <span class="keyword">end</span>
0421 
0422 
0423 <a name="_sub14" href="#_subfunctions" class="code">function ratio = btkC3DserverGetAnalogVideoRatio(id)</a>
0424 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0425 ratio = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
0426 
0427 
0428 <a name="_sub15" href="#_subfunctions" class="code">function f = btkC3DserverGetVideoFrameRate(id)</a>
0429 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0430 f = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrequency.html" class="code" title="function pf = btkGetPointFrequency(h) %#ok">btkGetPointFrequency</a>(h);
0431 
0432 
0433 <a name="_sub16" href="#_subfunctions" class="code">function type = btkC3DserverGetFileType(id)</a>
0434 <span class="keyword">global</span> btkC3DserverHandles;
0435 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0436 type = btkC3DserverHandles(idx).fileType;
0437 
0438 
0439 <a name="_sub17" href="#_subfunctions" class="code">function type = btkC3DserverGetDataType(id)</a>
0440 <span class="keyword">global</span> btkC3DserverHandles;
0441 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0442 type = btkC3DserverHandles(idx).dataType;
0443 
0444 
0445 <a name="_sub18" href="#_subfunctions" class="code">function num = btkC3DserverGetNumberEvents(id)</a>
0446 [h,idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0447 num = <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx);
0448 
0449 
0450 <a name="_sub19" href="#_subfunctions" class="code">function time = btkC3DserverGetEventTime(id, index)</a>
0451 [h,idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0452 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0453     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0454 <span class="keyword">end</span>
0455 times = <a href="../../../Functions/BTK/linux64/@Common/btkGetEventsValues.html" class="code" title="function [times, labels, descriptions, ids] = btkGetEventsValuesValues(h) %#ok">btkGetEventsValues</a>(h);
0456 index_ = <a href="#_sub100" class="code" title="subfunction index_ = btkC3DserverGetEventIndex_p(index,idx)">btkC3DserverGetEventIndex_p</a>(index,idx);
0457 time = times(index_);
0458 
0459 
0460 <a name="_sub20" href="#_subfunctions" class="code">function label = btkC3DserverGetEventLabel(id, index)</a>
0461 [h,idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0462 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0463     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0464 <span class="keyword">end</span>
0465 [times, labels] = <a href="../../../Functions/BTK/linux64/@Common/btkGetEventsValues.html" class="code" title="function [times, labels, descriptions, ids] = btkGetEventsValuesValues(h) %#ok">btkGetEventsValues</a>(h);
0466 index_ = <a href="#_sub100" class="code" title="subfunction index_ = btkC3DserverGetEventIndex_p(index,idx)">btkC3DserverGetEventIndex_p</a>(index,idx);
0467 label = labels{index_};
0468 
0469 
0470 <span class="comment">% The status returned is always set to 1 as the the metadata EVENTS doesn't take it into account.</span>
0471 <a name="_sub21" href="#_subfunctions" class="code">function status = btkC3DserverGetEventStatus(id, index)</a>
0472 [h,idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0473 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0474     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0475 <span class="keyword">end</span>
0476 <span class="comment">%[times, labels, descriptions, statuses] = btkGetEventsValues(h);</span>
0477 <span class="comment">%status = char(statuses(index+1));</span>
0478 status = char(1);
0479 
0480 
0481 <span class="comment">% The status is not saved as the the metadata EVENTS doesn't take it into account.</span>
0482 <a name="_sub22" href="#_subfunctions" class="code">function res = btkC3DserverAddEvent(id, label, status, time)</a>
0483 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0484 <span class="keyword">try</span>
0485     <span class="keyword">if</span> (status == char(0))
0486         warning(<span class="string">'btk:C3Dserver:AddEvent'</span>,<span class="string">'The library BTK didn''t save event''s status and are always set as displayed.'</span>);
0487     <span class="keyword">end</span>
0488     <a href="../../../Functions/BTK/linux64/@Common/btkAppendEvent.html" class="code" title="function btkAppendEvent(h, label, time, context, subject, description, id) %#ok">btkAppendEvent</a>(h, label, time, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, -65536); <span class="comment">% -65536: Special ID which will set the event detection flag to the value 0x10000. The ID will be then set to the default value (i.e. 0).</span>
0489     res = <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx) - 1; <span class="comment">% Added</span>
0490     <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0491 <span class="keyword">catch</span>
0492     err = lasterror();
0493     error(<span class="string">'btk:C3Dserver'</span>,[<span class="string">'An error occured during the adding of the event: '''</span>, err.message , <span class="string">''''</span>])
0494 <span class="keyword">end</span>
0495 
0496 
0497 <a name="_sub23" href="#_subfunctions" class="code">function res = btkC3DserverSetEventLabel(id, index, label)</a>
0498 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0499 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0500     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0501 <span class="keyword">end</span>
0502 index_ = <a href="#_sub100" class="code" title="subfunction index_ = btkC3DserverGetEventIndex_p(index,idx)">btkC3DserverGetEventIndex_p</a>(index,idx);
0503 <a href="../../../Functions/BTK/linux64/@Common/btkSetEventLabel.html" class="code" title="function btkSetEventLabel(h, index, newlabel) %#ok">btkSetEventLabel</a>(h, index_, label);
0504 res = 1;
0505 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0506 
0507 
0508 <a name="_sub24" href="#_subfunctions" class="code">function res = btkC3DserverSetEventTime(id, index, time)</a>
0509 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0510 <span class="keyword">if</span>((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0511     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0512 <span class="keyword">end</span>
0513 index_ = <a href="#_sub100" class="code" title="subfunction index_ = btkC3DserverGetEventIndex_p(index,idx)">btkC3DserverGetEventIndex_p</a>(index,idx);
0514 <a href="../../../Functions/BTK/linux64/@Common/btkSetEventTime.html" class="code" title="function btkSetEventTime(h, index, newtime) %#ok">btkSetEventTime</a>(h, index_, time);
0515 res = 1; <span class="comment">% Modified</span>
0516 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0517 
0518 
0519 <a name="_sub25" href="#_subfunctions" class="code">function res = btkC3DserverSetEventStatus(id, index, status)</a>
0520 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0521 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0522     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0523 <span class="keyword">end</span>
0524 <span class="comment">%btkSetEventStatus(h, index+1, status);</span>
0525 <span class="keyword">if</span> (status == <span class="string">'0'</span>)
0526     warning(<span class="string">'btk:C3Dserver:SetEventStatus'</span>, <span class="string">'The library BTK doesn''t set the event''s status.'</span>);
0527     res = 0; <span class="comment">% Not modified</span>
0528 <span class="keyword">else</span>
0529     res = 1;
0530     <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0531 <span class="keyword">end</span>
0532 
0533 
0534 <a name="_sub26" href="#_subfunctions" class="code">function res = btkC3DserverDeleteEvent(id, index)</a>
0535 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0536 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="#_sub99" class="code" title="subfunction num = btkC3DserverGetEventNumber_p(h,idx)">btkC3DserverGetEventNumber_p</a>(h,idx)))
0537     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0538 <span class="keyword">end</span>
0539 index_ = <a href="#_sub100" class="code" title="subfunction index_ = btkC3DserverGetEventIndex_p(index,idx)">btkC3DserverGetEventIndex_p</a>(index,idx);
0540 <a href="../../../Functions/BTK/linux64/@Common/btkRemoveEvent.html" class="code" title="function btkRemoveEvent(h, options) %#ok">btkRemoveEvent</a>(h, index_);
0541 res = 1; <span class="comment">% Removed</span>
0542 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0543 
0544 
0545 <a name="_sub27" href="#_subfunctions" class="code">function btkC3DserverSetStrictParameterChecking(id, value)</a>
0546 <span class="keyword">global</span> btkC3DserverHandles;
0547 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0548 btkC3DserverHandles(idx).strictChecking = value;
0549 
0550 
0551 <a name="_sub28" href="#_subfunctions" class="code">function btkCompressParameterBlocks(id, compress)</a>
0552 <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
0553 <span class="keyword">if</span> (compress == 0)
0554     warning(<span class="string">'btk:C3Dserver:CompressParameterBlocks'</span>,<span class="string">'Compression is done automatilcaly by BTK, as it regenerates the groups/parameters when you write the C3D.'</span>);
0555 <span class="keyword">end</span>
0556 
0557 
0558 <a name="_sub29" href="#_subfunctions" class="code">function num = btkC3DserverGetNumberGroups(id)</a>
0559 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0560 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0561 <span class="keyword">if</span> (isstruct(md.children))
0562     num = size(fieldnames(md.children),1);
0563 <span class="keyword">else</span>
0564     num = 0;
0565 <span class="keyword">end</span>
0566 
0567 
0568 <a name="_sub30" href="#_subfunctions" class="code">function index = btkC3DserverGetGroupIndex(id, label)</a>
0569 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0570 index = -1; <span class="comment">% Not found</span>
0571 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0572 <span class="keyword">if</span> (isstruct(md.children))
0573     labels = fieldnames(md.children);
0574     <span class="keyword">for</span> i = 1:size(labels,1)
0575         <span class="keyword">if</span> (strcmp(labels{i}, label))
0576             index = i - 1;
0577             <span class="keyword">break</span>;
0578         <span class="keyword">end</span>
0579     <span class="keyword">end</span>
0580 <span class="keyword">else</span>
0581     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0582 <span class="keyword">end</span>
0583 
0584 
0585 <a name="_sub31" href="#_subfunctions" class="code">function name = btkC3DserverGetGroupName(id, index)</a>
0586 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0587 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0588 <span class="keyword">if</span> (isstruct(md.children))
0589     labels = fieldnames(md.children);
0590     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0591         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0592     <span class="keyword">end</span>
0593     name = labels{index+1};
0594 <span class="keyword">else</span>
0595     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0596 <span class="keyword">end</span>
0597 
0598 
0599 <a name="_sub32" href="#_subfunctions" class="code">function num = btkC3DserverGetGroupNumber(id, index)</a>
0600 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0601 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0602 <span class="keyword">if</span> (isstruct(md.children))
0603     labels = fieldnames(md.children);
0604     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0605         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0606     <span class="keyword">end</span>
0607     num = -1*(index+1);
0608 <span class="keyword">else</span>
0609     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0610 <span class="keyword">end</span>
0611 
0612 
0613 <a name="_sub33" href="#_subfunctions" class="code">function locked = btkC3DserverGetGroupLock(id, index)</a>
0614 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0615 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0616 <span class="keyword">if</span> (isstruct(md.children))
0617     labels = fieldnames(md.children);
0618     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0619         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0620     <span class="keyword">end</span>
0621     <span class="keyword">if</span> (md.children.(labels{index+1}).unlocked == 0)
0622         locked = char(1);
0623     <span class="keyword">else</span>
0624         locked = char(0);
0625     <span class="keyword">end</span>
0626 <span class="keyword">else</span>
0627     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0628 <span class="keyword">end</span>
0629 
0630 
0631 <a name="_sub34" href="#_subfunctions" class="code">function desc = btkC3DserverGetGroupDescription(id, index)</a>
0632 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0633 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0634 <span class="keyword">if</span> (isstruct(md.children))
0635     labels = fieldnames(md.children);
0636     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0637         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0638     <span class="keyword">end</span>
0639     desc = md.children.(labels{index+1}).description;
0640 <span class="keyword">else</span>
0641     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0642 <span class="keyword">end</span>
0643 
0644 
0645 <a name="_sub35" href="#_subfunctions" class="code">function res = btkC3DserverSetGroupName(id, index, name)</a>
0646 <span class="keyword">global</span> btkC3DserverHandles
0647 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0648 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0649 <span class="keyword">if</span> (isstruct(md.children))
0650     labels = fieldnames(md.children);
0651     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0652         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0653     <span class="keyword">end</span>
0654     <span class="keyword">for</span> i =1:length(labels)
0655         <span class="keyword">if</span> ((i ~= (index+1)) &amp;&amp; strcmp(name, labels{i}))
0656             error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Group name already exists.'</span>);
0657         <span class="keyword">elseif</span> ((i ~= (index+1)) &amp;&amp; (btkC3DserverHandles(idx).strictChecking ~= 0))
0658             name_ = name;
0659             <span class="keyword">if</span> (length(name_) &gt; 6)
0660                 name_ = name_(1:6);
0661             <span class="keyword">end</span>
0662             label_ = labels{i};
0663             <span class="keyword">if</span> (length(label_) &gt; 6)
0664                 label_ = label_(1:6);
0665             <span class="keyword">end</span>
0666             <span class="keyword">if</span> (strcmp(name_, label_))
0667                 error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Group name already exists.'</span>);
0668             <span class="keyword">end</span>
0669         <span class="keyword">end</span>
0670     <span class="keyword">end</span>
0671     <span class="keyword">try</span>
0672         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>(h, index+1, name);
0673     <span class="keyword">catch</span>
0674         err = lasterror();
0675         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
0676     <span class="keyword">end</span>
0677 <span class="keyword">else</span>
0678     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0679 <span class="keyword">end</span>
0680 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0681 res = 1;
0682 
0683 
0684 <a name="_sub36" href="#_subfunctions" class="code">function res = btkC3DserverSetGroupNumber(id, index, num)</a>
0685 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0686 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0687 <span class="keyword">if</span> (isstruct(md.children))
0688     labels = fieldnames(md.children);
0689     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0690         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for group number.'</span>);
0691     <span class="keyword">elseif</span> (num &gt;= 0)
0692         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for group number.'</span>);
0693     <span class="keyword">end</span>
0694     warning(<span class="string">'btk:C3Dserver:UniqueNumber'</span>, <span class="string">'The library BTK doesn''t use an unique number for groups and parameters as it is automatically set when you write the C3D file. The number is not assigned.'</span>);
0695 <span class="keyword">else</span>
0696     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0697 <span class="keyword">end</span>
0698 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0699 res = 1;
0700 
0701 
0702 <a name="_sub37" href="#_subfunctions" class="code">function res = btkC3DserverSetGroupDescription(id, index, desc)</a>
0703 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0704 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0705 <span class="keyword">if</span> (isstruct(md.children))
0706     labels = fieldnames(md.children);
0707     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0708         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for group number.'</span>);
0709     <span class="keyword">end</span>
0710     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, index+1, desc);
0711 <span class="keyword">else</span>
0712     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0713 <span class="keyword">end</span>
0714 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0715 res = 1;
0716 
0717 
0718 <a name="_sub38" href="#_subfunctions" class="code">function res = btkC3DserverSetGroupLock(id, index, locked)</a>
0719 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0720 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0721 <span class="keyword">if</span> (isstruct(md.children))
0722     labels = fieldnames(md.children);
0723     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0724         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for group number.'</span>);
0725     <span class="keyword">end</span>
0726     <span class="keyword">if</span> (locked == char(0))
0727         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, index+1, 1);
0728     <span class="keyword">else</span>
0729         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, index+1, 0);
0730     <span class="keyword">end</span>
0731 <span class="keyword">else</span>
0732     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0733 <span class="keyword">end</span>
0734 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0735 res = 1;
0736 
0737 
0738 <a name="_sub39" href="#_subfunctions" class="code">function res = btkC3DserverAddGroup(id, num, name, desc, locked)</a>
0739 <span class="keyword">global</span> btkC3DserverHandles;
0740 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0741 <span class="keyword">if</span> (num &gt; 0)
0742     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for group number.'</span>);
0743 <span class="keyword">elseif</span> (num ~= 0)
0744     warning(<span class="string">'btk:C3Dserver:UniqueNumber'</span>, <span class="string">'The library BTK doesn''t use an unique number for group and parameter as it is automatically set when you write the C3D file. The number is not assigned.'</span>);
0745 <span class="keyword">end</span>
0746 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0747 <span class="keyword">if</span> (isstruct(md.children))
0748     labels = fieldnames(md.children);
0749     <span class="keyword">for</span> i =1:length(labels)
0750         <span class="keyword">if</span> strcmp(name, labels{i})
0751             error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Group name already exists.'</span>);
0752         <span class="keyword">elseif</span> (btkC3DserverHandles(idx).strictChecking ~= 0)
0753             name_ = name;
0754             <span class="keyword">if</span> (length(name_) &gt; 6)
0755                 name_ = name_(1:6);
0756             <span class="keyword">end</span>
0757             label_ = labels{i};
0758             <span class="keyword">if</span> (length(label_) &gt; 6)
0759                 label_ = label_(1:6);
0760             <span class="keyword">end</span>
0761             <span class="keyword">if</span> (strcmp(name_, label_))
0762                 error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Group name already exists.'</span>);
0763             <span class="keyword">end</span>
0764         <span class="keyword">end</span>
0765     <span class="keyword">end</span>
0766 <span class="keyword">else</span>
0767     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0768 <span class="keyword">end</span>
0769 <span class="keyword">try</span>
0770     md = <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, name);
0771     res = size(fieldnames(md.children),1);
0772     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, res, desc);
0773     <span class="keyword">if</span> (locked == char(0))
0774         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, res, 1);
0775     <span class="keyword">else</span>
0776         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, res, 0);
0777     <span class="keyword">end</span>
0778     res = res - 1;
0779 <span class="keyword">catch</span>
0780     err = lasterror();
0781     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
0782 <span class="keyword">end</span>
0783 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0784 
0785 
0786 <a name="_sub40" href="#_subfunctions" class="code">function res = btkC3DserverDeleteGroup(id, index, deleteParameters)</a>
0787 <span class="keyword">global</span> btkC3DserverHandles;
0788 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0789 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0790 <span class="keyword">if</span> (isstruct(md.children))
0791     labels = fieldnames(md.children);
0792     <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= size(labels,1)))
0793         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0794     <span class="keyword">end</span>
0795     <span class="keyword">if</span> (deleteParameters == char(0))
0796         warning(<span class="string">'btk:C3Dserver:DeleteGroup'</span>, <span class="string">'BTK doesn''t give the possibily to remove only the group and not its parameter (they will become orphans).'</span>);
0797     <span class="keyword">end</span>
0798     <a href="../../../Functions/BTK/linux64/@Common/btkRemoveMetaData.html" class="code" title="function btkRemoveMetaData(h, label_idx, sublabel_idx, ...) %#ok">btkRemoveMetaData</a>(h, index+1);
0799 <span class="keyword">else</span>
0800     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0801 <span class="keyword">end</span>
0802 <span class="comment">% Update internal parameter index</span>
0803 mapping = btkC3DserverHandles(idx).parameterIndexMapping;
0804 num = size(mapping,1);
0805 foo = [mapping{:,1}]; foo = reshape(foo, 2, length(foo)/2)';
0806 mapping = mapping(~(foo(:,1) == (index + 1)),:);
0807 num = num - size(mapping,1);
0808 <span class="keyword">for</span> i=1:size(mapping,1)
0809     <span class="keyword">if</span> (mapping{i,1}(1) &gt; (index + 1))
0810         mapping{i,1}(1) = mapping{i,1}(1) - 1;
0811         mapping{i,2} = mapping{i,2} - num;
0812     <span class="keyword">end</span>
0813 <span class="keyword">end</span>
0814 btkC3DserverHandles(idx).parameterIndexMapping = mapping;
0815 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
0816 res = 1;
0817 
0818 
0819 <a name="_sub41" href="#_subfunctions" class="code">function num = btkC3DserverGetNumberParameters(id)</a>
0820 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0821 num = 0;
0822 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0823 <span class="keyword">if</span> (isstruct(md.children))
0824     labels = fieldnames(md.children);
0825     <span class="keyword">for</span> i = 1:size(labels,1)
0826         children = md.children.(labels{i}).children;
0827         <span class="keyword">if</span> (isstruct(children))
0828             num = num + size(fieldnames(children),1);
0829         <span class="keyword">end</span>
0830     <span class="keyword">end</span>
0831 <span class="keyword">else</span>
0832     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0833 <span class="keyword">end</span>
0834 
0835 
0836 <a name="_sub42" href="#_subfunctions" class="code">function index = btkC3DserverGetParameterIndex(id, groupLabel, paramLabel)</a>
0837 <span class="keyword">global</span> btkC3DserverHandles;
0838 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0839 num = 0;
0840 index = -1;
0841 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
0842 <span class="keyword">if</span> (isstruct(md.children))
0843     idxGr = 0;
0844     labels = fieldnames(md.children);
0845     <span class="keyword">for</span> i = 1:size(labels,1)
0846         children = md.children.(labels{i}).children;
0847         <span class="keyword">if</span> (strcmp(labels{i}, groupLabel))
0848             idxGr = i;
0849             <span class="keyword">break</span>;
0850         <span class="keyword">elseif</span> (isstruct(children))
0851             num = num + size(fieldnames(children),1);
0852         <span class="keyword">end</span>
0853     <span class="keyword">end</span>
0854     <span class="keyword">if</span> (idxGr ~= 0)
0855         idxPr = 0;
0856         md = md.children.(labels{idxGr});
0857         <span class="keyword">if</span> (isstruct(md.children))
0858             labels = fieldnames(md.children);
0859             <span class="keyword">for</span> i = 1:size(labels,1)
0860                 <span class="keyword">if</span> (strcmp(labels{i}, paramLabel))
0861                     idxPr = i;
0862                     <span class="keyword">break</span>;
0863                 <span class="keyword">else</span>
0864                     num = num + 1;
0865                 <span class="keyword">end</span>
0866             <span class="keyword">end</span>
0867         <span class="keyword">end</span>
0868         <span class="keyword">if</span> (idxPr ~= 0)
0869             <span class="keyword">for</span> i = 1:size(btkC3DserverHandles(idx).parameterIndexMapping,1)
0870                 <span class="keyword">if</span> all(btkC3DserverHandles(idx).parameterIndexMapping{i,1} == [idxGr, idxPr])
0871                     index = btkC3DserverHandles(idx).parameterIndexMapping{i,2};
0872                     <span class="keyword">break</span>;
0873                 <span class="keyword">end</span>
0874             <span class="keyword">end</span>
0875         <span class="keyword">end</span>
0876     <span class="keyword">end</span>
0877 <span class="keyword">else</span>
0878     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
0879 <span class="keyword">end</span>
0880 
0881 
0882 <a name="_sub43" href="#_subfunctions" class="code">function name = btkC3DserverGetParameterName(id, index)</a>
0883 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0884 <span class="keyword">if</span> (index == -1)
0885     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0886 <span class="keyword">else</span>
0887     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0888 <span class="keyword">end</span>
0889 name = parameter.label;
0890 
0891 
0892 <a name="_sub44" href="#_subfunctions" class="code">function num = btkC3DserverGetParameterNumber(id, index)</a>
0893 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0894 <span class="keyword">if</span> (index == -1)
0895     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0896 <span class="keyword">else</span>
0897     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0898 <span class="keyword">end</span>
0899 num = parameter.id;
0900 
0901 
0902 <a name="_sub45" href="#_subfunctions" class="code">function locked = btkC3DserverGetParameterLock(id, index)</a>
0903 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0904 <span class="keyword">if</span> (index == -1)
0905     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0906 <span class="keyword">else</span>
0907     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0908 <span class="keyword">end</span>
0909 <span class="keyword">if</span> (parameter.unlocked == 0)
0910     locked = char(1);
0911 <span class="keyword">else</span>
0912     locked = char(0);
0913 <span class="keyword">end</span>
0914 
0915 
0916 <a name="_sub46" href="#_subfunctions" class="code">function description = btkC3DserverGetParameterDescription(id, index)</a>
0917 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0918 <span class="keyword">if</span> (index == -1)
0919     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0920 <span class="keyword">else</span>
0921     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0922 <span class="keyword">end</span>
0923 description = parameter.description;
0924 
0925 
0926 <a name="_sub47" href="#_subfunctions" class="code">function t = btkC3DserverGetParameterType(id, index)</a>
0927 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0928 <span class="keyword">if</span> (index == -1)
0929     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0930 <span class="keyword">else</span>
0931     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0932 <span class="keyword">end</span>
0933 <span class="keyword">if</span> (isstruct(parameter.info))
0934     <span class="keyword">switch</span> parameter.info.format
0935         <span class="keyword">case</span> <span class="string">'Char'</span>
0936             t = -1;
0937         <span class="keyword">case</span> <span class="string">'Byte'</span>
0938             t = 1;
0939         <span class="keyword">case</span> <span class="string">'Integer'</span>
0940             t = 2;
0941         <span class="keyword">case</span> <span class="string">'Real'</span>
0942             t = 4;
0943     <span class="keyword">end</span>
0944 <span class="keyword">else</span>
0945     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The selected metadata doesn''t contains information.'</span>)
0946 <span class="keyword">end</span>
0947 
0948 
0949 <a name="_sub48" href="#_subfunctions" class="code">function num = btkC3DserverGetParameterNumberDim(id, index)</a>
0950 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0951 <span class="keyword">if</span> (index == -1)
0952     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0953 <span class="keyword">else</span>
0954     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0955 <span class="keyword">end</span>
0956 <span class="keyword">if</span> (isstruct(parameter.info))
0957     num = length(parameter.info.dims);
0958 <span class="keyword">else</span>
0959     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The selected metadata doesn''t contains information.'</span>)
0960 <span class="keyword">end</span>
0961 
0962 
0963 <a name="_sub49" href="#_subfunctions" class="code">function num = btkC3DserverGetParameterDimension(id, index, dim)</a>
0964 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0965 <span class="keyword">if</span> (index == -1)
0966     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0967 <span class="keyword">else</span>
0968     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0969 <span class="keyword">end</span>
0970 <span class="keyword">if</span> (isstruct(parameter.info))
0971     <span class="keyword">if</span> (dim &gt;= length(parameter.info.dims))
0972         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
0973     <span class="keyword">else</span>
0974         num = parameter.info.dims(dim+1);
0975     <span class="keyword">end</span>
0976 <span class="keyword">else</span>
0977     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The selected metadata doesn''t contains information.'</span>)
0978 <span class="keyword">end</span>
0979 
0980 
0981 <a name="_sub50" href="#_subfunctions" class="code">function num = btkC3DserverGetParameterLength(id, index)</a>
0982 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0983 <span class="keyword">if</span> (index == -1)
0984     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0985 <span class="keyword">else</span>
0986     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
0987 <span class="keyword">end</span>
0988 <span class="keyword">if</span> (isstruct(parameter.info))
0989     num = numel(parameter.info.values);
0990 <span class="keyword">else</span>
0991     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The selected metadata doesn''t contains information.'</span>)
0992 <span class="keyword">end</span>
0993 
0994 
0995 <a name="_sub51" href="#_subfunctions" class="code">function value = btkC3DserverGetParameterValue(id, index, item)</a>
0996 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
0997 <span class="keyword">if</span> (index == -1)
0998     parameter = <a href="#_sub94" class="code" title="subfunction parameter = btkC3DserverGetCopiedParameter_p(idx)">btkC3DserverGetCopiedParameter_p</a>(idx);
0999 <span class="keyword">else</span>
1000     parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1001 <span class="keyword">end</span>
1002 <span class="keyword">if</span> (isstruct(parameter.info))
1003     <span class="keyword">if</span> (item &gt;= numel(parameter.info.values))
1004         <span class="keyword">if</span> (strcmp(parameter.info.format, <span class="string">'Char'</span>))
1005             value = <span class="string">''</span>;
1006         <span class="keyword">else</span>
1007             value = 0;
1008         <span class="keyword">end</span>
1009     <span class="keyword">else</span>
1010         value = parameter.info.values(item+1);
1011         <span class="keyword">if</span> (iscell(value))
1012             value = value{1};
1013         <span class="keyword">end</span>
1014     <span class="keyword">end</span>
1015 <span class="keyword">else</span>
1016     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The selected metadata doesn''t contains information.'</span>)
1017 <span class="keyword">end</span>
1018 <span class="keyword">switch</span> parameter.info.format
1019     <span class="keyword">case</span> <span class="string">'Byte'</span>
1020         value = uint8(value);
1021     <span class="keyword">case</span> <span class="string">'Integer'</span>
1022         value = int32(value);
1023     <span class="keyword">case</span> <span class="string">'Real'</span>
1024         value = single(value);
1025 <span class="keyword">end</span>
1026 
1027 <a name="_sub52" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterName(id, index, name)</a>
1028 <span class="keyword">global</span> btkC3DserverHandles;
1029 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1030 <span class="keyword">if</span> (index == -1)
1031     <a href="#_sub95" class="code" title="subfunction btkC3DserverModifyCopiedParameter_p(idx, field, value, item)">btkC3DserverModifyCopiedParameter_p</a>(idx, <span class="string">'label'</span>, name);
1032 <span class="keyword">else</span>
1033     [parameter, indices, parent] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1034     labels = fieldnames(parent.children);
1035     <span class="keyword">for</span> i =1:length(labels)
1036         <span class="keyword">if</span> ((i ~= (index+1)) &amp;&amp; strcmp(name, labels{i}))
1037             error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'This parameter already exists within the group.'</span>);
1038         <span class="keyword">elseif</span> ((i ~= (index+1)) &amp;&amp; (btkC3DserverHandles(idx).strictChecking ~= 0))
1039             name_ = name;
1040             <span class="keyword">if</span> (length(name_) &gt; 6)
1041                 name_ = name_(1:6);
1042             <span class="keyword">end</span>
1043             label_ = labels{i};
1044             <span class="keyword">if</span> (length(label_) &gt; 6)
1045                 label_ = label_(1:6);
1046             <span class="keyword">end</span>
1047             <span class="keyword">if</span> (strcmp(name_, label_))
1048                 error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'This parameter already exists within the group.'</span>);
1049             <span class="keyword">end</span>
1050         <span class="keyword">end</span>
1051     <span class="keyword">end</span>
1052     <span class="keyword">try</span>
1053         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>(h, indices(1), indices(2), name);
1054     <span class="keyword">catch</span>
1055         err = lasterror();
1056         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1057     <span class="keyword">end</span>
1058 <span class="keyword">end</span>
1059 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1060 res = 1;
1061 
1062 
1063 <a name="_sub53" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterNumber(id, index, num)</a>
1064 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1065 <span class="keyword">if</span> (index ~= -1)
1066     [temp indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1067 <span class="keyword">end</span>
1068 <span class="keyword">if</span> (num &lt;= 0)
1069     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect value for parameter number.'</span>);
1070 <span class="keyword">end</span>
1071 warning(<span class="string">'btk:C3Dserver:UniqueNumber'</span>, <span class="string">'The library BTK doesn''t use an unique number for group and parameter as it is automatically set when you write the C3D file. The number is not assigned.'</span>);
1072 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1073 res = 1;
1074 
1075 
1076 <a name="_sub54" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterLock(id, index, locked)</a>
1077 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1078 <span class="keyword">if</span> (index == -1)
1079     unlocked = 0;
1080     <span class="keyword">if</span> (locked == char(0))
1081         unlocked = 1;
1082     <span class="keyword">end</span>
1083     <a href="#_sub95" class="code" title="subfunction btkC3DserverModifyCopiedParameter_p(idx, field, value, item)">btkC3DserverModifyCopiedParameter_p</a>(idx, <span class="string">'unlocked'</span>, unlocked);
1084 <span class="keyword">else</span>
1085     [temp indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1086     <span class="keyword">try</span>
1087         <span class="keyword">if</span> (locked == char(0))
1088             <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, indices(1), indices(2), 1);
1089         <span class="keyword">else</span>
1090             <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, indices(1), indices(2), 0);
1091         <span class="keyword">end</span>
1092     <span class="keyword">catch</span>
1093         err = lasterror();
1094         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1095     <span class="keyword">end</span>
1096 <span class="keyword">end</span>
1097 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1098 res = 1;
1099 
1100 
1101 <a name="_sub55" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterDescription(id, index, desc)</a>
1102 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1103 <span class="keyword">if</span> (index == -1)
1104     <a href="#_sub95" class="code" title="subfunction btkC3DserverModifyCopiedParameter_p(idx, field, value, item)">btkC3DserverModifyCopiedParameter_p</a>(idx, <span class="string">'description'</span>, desc);
1105 <span class="keyword">else</span>
1106     [temp indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1107     <span class="keyword">try</span>
1108         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, indices(1), indices(2), desc);
1109     <span class="keyword">catch</span>
1110         err = lasterror();
1111         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1112     <span class="keyword">end</span>
1113 <span class="keyword">end</span>
1114 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1115 res = 1;
1116 
1117 
1118 <a name="_sub56" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterType(id, index, t)</a>
1119 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1120 <span class="keyword">switch</span> t
1121     <span class="keyword">case</span> -1
1122         t_ = <span class="string">'Char'</span>;
1123     <span class="keyword">case</span> 1
1124         t_ = <span class="string">'Byte'</span>;
1125     <span class="keyword">case</span> 2
1126         t_ = <span class="string">'Integer'</span>;
1127     <span class="keyword">case</span> 4
1128         t_ = <span class="string">'Real'</span>;
1129     <span class="keyword">otherwise</span>
1130         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'The given parameter''s type is unsupported.'</span>)
1131 <span class="keyword">end</span>
1132 <span class="keyword">if</span> (index == -1)
1133     <a href="#_sub95" class="code" title="subfunction btkC3DserverModifyCopiedParameter_p(idx, field, value, item)">btkC3DserverModifyCopiedParameter_p</a>(idx, {<span class="string">'info'</span>,<span class="string">'format'</span>}, t_);
1134 <span class="keyword">else</span>
1135     [temp indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1136     <span class="keyword">try</span>
1137         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataFormat.html" class="code" title="function btkSetMetaDataFormat(h, label_idx, sublabel_idx, ..., newFormat) %#ok">btkSetMetaDataFormat</a>(h, indices(1), indices(2), t_);
1138     <span class="keyword">catch</span>
1139         err = lasterror();
1140         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1141     <span class="keyword">end</span>
1142 <span class="keyword">end</span>
1143 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1144 res = 1;
1145 
1146 
1147 <a name="_sub57" href="#_subfunctions" class="code">function res = btkC3DserverSetParameterValue(id, index, item, value)</a>
1148 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1149 <span class="keyword">if</span> (index == -1)
1150     <a href="#_sub95" class="code" title="subfunction btkC3DserverModifyCopiedParameter_p(idx, field, value, item)">btkC3DserverModifyCopiedParameter_p</a>(idx, {<span class="string">'info'</span>,<span class="string">'values'</span>}, value, item);
1151 <span class="keyword">else</span>
1152     [parameter indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1153     <span class="keyword">try</span>
1154         <span class="keyword">if</span> ((item &lt; 0) || (item &gt; numel(parameter.info.values)))
1155             error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>)
1156         <span class="keyword">end</span>
1157         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>(h, indices(1), indices(2), item+1, value);
1158     <span class="keyword">catch</span>
1159         err = lasterror();
1160         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1161     <span class="keyword">end</span>
1162 <span class="keyword">end</span>
1163 <span class="comment">% Why C3Dserver doesn't set the flag modified to true?</span>
1164 <span class="comment">%btkC3DserverSetModified_p(idx,1);</span>
1165 res = 1;
1166 
1167 
1168 <a name="_sub58" href="#_subfunctions" class="code">function res = btkC3DserverAddParameter(id, name, desc, group, locked, t, numDim, dimList, data)</a>
1169 <span class="keyword">global</span> btkC3DserverHandles
1170 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1171 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
1172 <span class="keyword">if</span> (~isstruct(md.children))
1173     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
1174 <span class="keyword">end</span>
1175 labels = fieldnames(md.children);
1176 parent = [];
1177     <span class="keyword">for</span> i = 1:length(labels)
1178         <span class="keyword">if</span> strcmp(group, labels{i})
1179             parent = md.children.(labels{i});
1180             idxGr = i;
1181             <span class="keyword">break</span>;
1182         <span class="keyword">end</span>
1183     <span class="keyword">end</span>
1184 <span class="keyword">if</span> isempty(parent)
1185     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Could not find the selected group.'</span>);
1186 <span class="keyword">end</span>
1187 <span class="keyword">if</span> (isstruct(parent.children))
1188     labels = fieldnames(parent.children);
1189     <span class="keyword">for</span> i = 1:length(labels)
1190         <span class="keyword">if</span> (strcmp(name, labels{i}))
1191             error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'This parameter already exists within the group.'</span>);
1192         <span class="keyword">elseif</span> (btkC3DserverHandles(idx).strictChecking ~= 0)
1193             name_ = name;
1194             <span class="keyword">if</span> (length(name_) &gt; 6)
1195                 name_ = name_(1:6);
1196             <span class="keyword">end</span>
1197             label_ = labels{i};
1198             <span class="keyword">if</span> (length(label_) &gt; 6)
1199                 label_ = label_(1:6);
1200             <span class="keyword">end</span>
1201             <span class="keyword">if</span> (strcmp(name_, label_))
1202                 error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'This parameter already exists within the group.'</span>);
1203             <span class="keyword">end</span>
1204         <span class="keyword">end</span>
1205     <span class="keyword">end</span>
1206     idxPr = length(labels) + 1;
1207 <span class="keyword">end</span>
1208 <span class="keyword">switch</span> t
1209     <span class="keyword">case</span> -1
1210         format = <span class="string">'Char'</span>;
1211     <span class="keyword">case</span> 1
1212         format = <span class="string">'Byte'</span>;
1213     <span class="keyword">case</span> 2
1214         format = <span class="string">'Integer'</span>;
1215     <span class="keyword">case</span> 4
1216         format = <span class="string">'Real'</span>;
1217     <span class="keyword">otherwise</span>
1218         error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'The given parameter''s type is unsupported.'</span>);
1219 <span class="keyword">end</span>
1220 <span class="keyword">if</span> (numDim ~= numel(dimList))
1221     dimList = ones(1,numDim);
1222     <span class="keyword">if</span> (t == -1)
1223         data = {};
1224     <span class="keyword">else</span>
1225         data = 1;
1226     <span class="keyword">end</span>
1227 <span class="keyword">end</span>
1228 <span class="keyword">if</span> (t ~= -1)
1229     data = double(data); <span class="comment">% Adapt the data for btkAppendMetaData</span>
1230 <span class="keyword">end</span>
1231 <span class="keyword">try</span>
1232     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, group, name, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(format, data(:)));
1233     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>(h, group, name, double(dimList));
1234     <span class="keyword">if</span> (locked == char(0))
1235         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, group, name, 1);
1236     <span class="keyword">else</span>
1237         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, group, name, 0);
1238     <span class="keyword">end</span>
1239     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, group, name, desc);
1240     res = <a href="#_sub41" class="code" title="subfunction num = btkC3DserverGetNumberParameters(id)">btkC3DserverGetNumberParameters</a>(id)-1;
1241     btkC3DserverHandles(idx).parameterIndexMapping(end+1,:) = {[idxGr, idxPr], res};
1242     <span class="comment">%res = btkC3DserverGetParameterIndex(id, group, name);</span>
1243 <span class="keyword">catch</span>
1244     err = lasterror();
1245     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1246 <span class="keyword">end</span>
1247 <span class="comment">% Why C3Dserver doesn't set the flag modified to true?</span>
1248 <span class="comment">%btkC3DserverSetModified_p(idx,1);</span>
1249 
1250 
1251 <a name="_sub59" href="#_subfunctions" class="code">function res = btkC3DserverDeleteParameter(id, index)</a>
1252 <span class="keyword">global</span> btkC3DserverHandles;
1253 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1254 [temp indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1255 <span class="keyword">try</span>
1256     <a href="../../../Functions/BTK/linux64/@Common/btkRemoveMetaData.html" class="code" title="function btkRemoveMetaData(h, label_idx, sublabel_idx, ...) %#ok">btkRemoveMetaData</a>(h, indices(1), indices(2));
1257     res = 1; <span class="comment">% Deleted</span>
1258 <span class="keyword">catch</span>
1259     err = lasterror();
1260     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1261 <span class="keyword">end</span>
1262 <span class="comment">% Update internal parameter index</span>
1263 mapping = btkC3DserverHandles(idx).parameterIndexMapping;
1264 foo = [mapping{:,1}]; foo = reshape(foo, 2, length(foo)/2)';
1265 mapping = mapping(~((foo(:,1) == indices(1)) &amp; (foo(:,2) == indices(2))),:);
1266 <span class="keyword">for</span> i=1:size(mapping,1)
1267     <span class="keyword">if</span> ((mapping{i,1}(1) == indices(1)) &amp;&amp; (mapping{i,1}(2) &gt; indices(2)))
1268         mapping{i,1}(2) = mapping{i,1}(2) - 1;
1269         mapping{i,2} = mapping{i,2} - 1;
1270     <span class="keyword">elseif</span> (mapping{i,1}(1) &gt; indices(1))
1271         mapping{i,2} = mapping{i,2} - 1;
1272     <span class="keyword">end</span>
1273 <span class="keyword">end</span>
1274 btkC3DserverHandles(idx).parameterIndexMapping = mapping;
1275 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1276 
1277 
1278 <a name="_sub60" href="#_subfunctions" class="code">function res = btkC3DserverCopyParameter(id, index)</a>
1279 <span class="keyword">global</span> btkC3DserverHandles;
1280 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1281 parameter = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1282 <span class="keyword">if</span> ~iscell(parameter.info.values)
1283     parameter.info.values = {parameter.info.values};
1284 <span class="keyword">end</span>
1285 btkC3DserverHandles(idx).copiedParameter = parameter;
1286 res = 1; <span class="comment">% Copied</span>
1287 
1288 <a name="_sub61" href="#_subfunctions" class="code">function res = btkC3DserverRetrieveParameter(id, index)</a>
1289 <span class="keyword">global</span> btkC3DserverHandles;
1290 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1291 res = 0; <span class="comment">% Not retrieved</span>
1292 <span class="keyword">if</span> isstruct(btkC3DserverHandles(idx).copiedParameter)
1293     indices = [];
1294     <span class="keyword">for</span> i = 1:length(btkC3DserverHandles(idx).parameterIndexMapping)
1295         <span class="keyword">if</span> (btkC3DserverHandles(idx).parameterIndexMapping{i,2} == index)
1296             indices = btkC3DserverHandles(idx).parameterIndexMapping{i,1};
1297             <span class="keyword">break</span>;
1298         <span class="keyword">end</span>
1299     <span class="keyword">end</span>
1300     <span class="keyword">if</span> isempty(indices)
1301         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
1302     <span class="keyword">end</span>
1303     <span class="keyword">try</span>
1304         parameter = btkC3DserverHandles(idx).copiedParameter;
1305         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataLabel.html" class="code" title="function btkSetMetaDataLabel(h, label_idx, sublabel_idx, ..., newlabel) %#ok">btkSetMetaDataLabel</a>(h, indices(1), indices(2), parameter.label);
1306         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataFormat.html" class="code" title="function btkSetMetaDataFormat(h, label_idx, sublabel_idx, ..., newFormat) %#ok">btkSetMetaDataFormat</a>(h, indices(1), indices(2), parameter.info.format);
1307         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>(h, indices(1), indices(2), parameter.info.dims);
1308         <span class="keyword">for</span> i = 1:numel(parameter.info.values);
1309             <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>(h, indices(1), indices(2), i, parameter.info.values{i});
1310         <span class="keyword">end</span>
1311         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataUnlock.html" class="code" title="function btkSetMetaDataUnlock(h, label_idx, sublabel_idx, ..., isunlocked) %#ok">btkSetMetaDataUnlock</a>(h, indices(1), indices(2), parameter.unlocked);
1312         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, indices(1), indices(2), parameter.description);
1313     <span class="keyword">catch</span>
1314         err = lasterror();
1315         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1316     <span class="keyword">end</span>
1317     <span class="comment">% No modification</span>
1318     <span class="comment">%btkC3DserverSetModified_p(idx,1);</span>
1319     res = 1;
1320 <span class="keyword">end</span>
1321  
1322 
1323 <a name="_sub62" href="#_subfunctions" class="code">function res = btkC3DserverRemoveParameterData(id, index, item)</a>
1324 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1325 [parameter indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1326 <span class="keyword">if</span> isstruct(parameter.info)
1327     <span class="keyword">if</span> ~isempty(parameter.info.dims)
1328         <span class="keyword">if</span> (~(strcmp(parameter.info.format, <span class="string">'Char'</span>) &amp;&amp; (numel(parameter.info.dims) == 1)) &amp;&amp; (item &lt; parameter.info.dims(end)))
1329             <span class="keyword">if</span> (item &lt; 0)
1330                 error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid (negative) index has been used.'</span>);
1331             <span class="keyword">end</span>
1332             <span class="keyword">if</span> (strcmp(parameter.info.format, <span class="string">'Char'</span>))
1333                 idxStart = 2;
1334             <span class="keyword">else</span>
1335                 idxStart = 1;
1336             <span class="keyword">end</span>
1337             p = prod(parameter.info.dims(idxStart:end-1));
1338             offset = p * item;
1339             values = parameter.info.values;
1340             dims = parameter.info.dims;
1341             dims(end) = dims(end) - 1;
1342             values = values(:);
1343             values = values([1:offset,offset+p+1:end]);
1344             <span class="keyword">try</span>
1345                 <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>(h,indices(1),indices(2),dims);
1346                 <span class="keyword">for</span> j=1:length(values);
1347                     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataValue.html" class="code" title="function btkSetMetaDataValue(h, label_idx, sublabel_idx, ..., index, value) %#ok">btkSetMetaDataValue</a>(h,indices(1),indices(2),j,values(j));
1348                 <span class="keyword">end</span>;
1349             <span class="keyword">catch</span>
1350                 err = lasterror();
1351                 error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1352             <span class="keyword">end</span>
1353             <span class="comment">% Not modified?</span>
1354             <span class="comment">%btkC3DserverSetModified_p(idx,1);</span>
1355         <span class="keyword">end</span>
1356         res = 1;
1357         <span class="keyword">return</span>;
1358     <span class="keyword">end</span>
1359 <span class="keyword">end</span>
1360 res = 0;
1361 
1362 
1363 <a name="_sub63" href="#_subfunctions" class="code">function res = btkC3DserverAddParameterData(id, index, items)</a>
1364 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1365 [parameter indices] = <a href="#_sub93" class="code" title="subfunction [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)">btkC3DserverExtractParameter_p</a>(h, idx, index);
1366 <span class="keyword">if</span> (items &lt;= 0)
1367     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid value for the dimension.'</span>);
1368 <span class="keyword">end</span>
1369 res = -1; <span class="comment">% Not added</span>
1370 <span class="keyword">if</span> isstruct(parameter.info) &amp;&amp; ~isempty(parameter.info.dims)
1371     dims = parameter.info.dims;
1372     dims(end) = dims(end) + items;
1373     <span class="keyword">try</span>
1374         <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDimensions.html" class="code" title="function btkSetMetaDataDimensions(h, label_idx, sublabel_idx, ..., newdims) %#ok">btkSetMetaDataDimensions</a>(h,indices(1),indices(2),dims);
1375     <span class="keyword">catch</span>
1376         err = lasterror();
1377         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1378     <span class="keyword">end</span>
1379     <span class="comment">% Not modified?</span>
1380     <span class="comment">%btkC3DserverSetModified_p(idx,1);</span>
1381     res = 1;
1382 <span class="keyword">end</span>
1383 
1384 
1385 <a name="_sub64" href="#_subfunctions" class="code">function data = btkC3DserverGetAnalogData(id, channel, frame, subFrame, scaled, offset, scale, useScale)</a>
1386 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1387 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1388     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1389 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1390     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1391 <span class="keyword">elseif</span> ((subFrame &lt; 1) || (subFrame &gt; <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h)))
1392     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid subframe number.'</span>);
1393 <span class="keyword">end</span>
1394 frame_ = (frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h) + subFrame;
1395 [data, info] = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>(h, channel+1);
1396 data = data(frame_);
1397 <span class="comment">% Unscale the data</span>
1398 offset_ = info.offset;
1399 scale_ = info.scale;
1400 data = data / scale_ + offset_;
1401 <span class="keyword">if</span> (scaled == char(0)) <span class="comment">% Unscaled data</span>
1402     <span class="comment">% Nothing to do</span>
1403 <span class="keyword">elseif</span> (useScale == char(0)) <span class="comment">% Scaled data with acquisition's offset and scale</span>
1404     <span class="comment">% Rescale</span>
1405     [rescale, reoffset] = <a href="#_sub96" class="code" title="subfunction [scale, offset, label, description, gain] = btkC3DserverExtractAnalogInfos_p(h,index)">btkC3DserverExtractAnalogInfos_p</a>(h,channel+1);
1406     data = (data - reoffset) * rescale;
1407 <span class="keyword">else</span> <span class="comment">% Scaled with the given offset and scale</span>
1408     <span class="comment">% Rescale</span>
1409     data = (data - offset) * scale;
1410 <span class="keyword">end</span>
1411 data = single(data);
1412 
1413 
1414 <a name="_sub65" href="#_subfunctions" class="code">function data = btkC3DserverGetAnalogDataEx(id, channel, startFrame, endFrame, scaled, offset, scale, useScale)</a>
1415 <span class="keyword">global</span> btkC3DserverHandles;
1416 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1417 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1418     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1419 <span class="keyword">elseif</span> (endFrame &lt; startFrame)
1420     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'End frame number lower than start frame number.'</span>);
1421 <span class="keyword">elseif</span> ((startFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (startFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1422     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid start frame number.'</span>);
1423 <span class="keyword">elseif</span> ((endFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (endFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1424     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid end frame number.'</span>);
1425 <span class="keyword">end</span>
1426 sF = (startFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h) + 1;
1427 eF = (endFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
1428 frames_ = sF:eF;
1429 [data_, info] = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>(h, channel+1);
1430 data_ = data_(frames_);
1431 <span class="comment">% Unscale the data</span>
1432 offset_ = info.offset;
1433 scale_ = info.scale;
1434 data_ = data_ / scale_ + offset_;
1435 <span class="keyword">if</span> (scaled == 0) <span class="comment">% Unscaled data</span>
1436     <span class="keyword">if</span> (btkC3DserverHandles(idx).dataType == 1) <span class="comment">% Integer format</span>
1437         data_ = int16(data_);
1438     <span class="keyword">else</span>
1439         data_ = single(data_);
1440     <span class="keyword">end</span>
1441 <span class="keyword">elseif</span> (useScale == 0) <span class="comment">% Scaled data with acquisition's offset and scale</span>
1442     <span class="comment">% Rescale</span>
1443     [rescale, reoffset] = <a href="#_sub96" class="code" title="subfunction [scale, offset, label, description, gain] = btkC3DserverExtractAnalogInfos_p(h,index)">btkC3DserverExtractAnalogInfos_p</a>(h,channel+1);
1444     data_ = (data_ - reoffset) * rescale;
1445     data_ = single(data_);
1446 <span class="keyword">else</span> <span class="comment">% Scaled with the given offset and scale</span>
1447     <span class="comment">% Rescale</span>
1448     data_ = (data_ - offset) * scale;
1449     <span class="keyword">if</span> (btkC3DserverHandles(idx).dataType == 1) <span class="comment">% Integer format</span>
1450         data_ = single(data_);
1451     <span class="keyword">end</span>
1452 <span class="keyword">end</span>
1453 data = num2cell(data_);
1454 
1455 
1456 <a name="_sub66" href="#_subfunctions" class="code">function res = btkC3DserverSetAnalogData(id, channel, frame, subFrame, data)</a>
1457 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1458 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1459     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1460 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1461     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1462 <span class="keyword">elseif</span> ((subFrame &lt; 1) || (subFrame &gt; <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h)))
1463     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid subframe number.'</span>);
1464 <span class="keyword">end</span>
1465 frame_ = (frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h) + subFrame;
1466 [data_, info] = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>(h, channel+1);
1467 offset_ = info.offset;
1468 scale_ = info.scale;
1469 data_(frame_) = (data - offset_) * scale_ ;
1470 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>(h, channel+1, data_);
1471 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1472 res = 1;
1473 
1474 
1475 <a name="_sub67" href="#_subfunctions" class="code">function res = btkC3DserverSetAnalogDataEx(id, channel, frame, data)</a>
1476 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1477 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1478     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1479 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1480     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1481 <span class="keyword">elseif</span> (size(data,1) ~= 1)
1482     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid data size. Must contain only one row.'</span>);
1483 <span class="keyword">elseif</span> ~isa(data,<span class="string">'int16'</span>)
1484     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Incorrect data type passed to the function.'</span>);
1485 <span class="keyword">end</span>
1486 sF = (frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h) + 1;
1487 eF = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>(h);
1488 <span class="keyword">if</span> ((sF + length(data)) &lt;= eF)
1489     frames_ = sF:sF+length(data)-1;
1490 <span class="keyword">else</span>
1491     frames_ = sF:eF;
1492 <span class="keyword">end</span>
1493 [d, info] = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>(h, channel+1);
1494 offset_ = info.offset;
1495 scale_ = info.scale;
1496 d(frames_) = (double(data(1:length(frames_))) - offset_) * scale_ ;
1497 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>(h, channel+1, d);
1498 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1499 res = 1;
1500 
1501 
1502 <a name="_sub68" href="#_subfunctions" class="code">function res = btkC3DserverSetAVRatio(id, avRatio)</a>
1503 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1504 <span class="keyword">if</span> (<a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h) &gt; 0)
1505     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Analog channels already exists in the file.'</span>);
1506 <span class="keyword">elseif</span> (avRatio &lt; 0)
1507     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'You have to provide a ratio greater than or equal to zero.'</span>);
1508 <span class="keyword">end</span>
1509 <span class="keyword">if</span> (avRatio == 0)
1510     avRatio = 1;
1511 <span class="keyword">end</span>
1512 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogSampleNumberPerFrame.html" class="code" title="function btkSetAnalogSampleNumberPerFrame(h, ratio) %#ok">btkSetAnalogSampleNumberPerFrame</a>(h, round(avRatio));
1513 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1514 res = 1;
1515 
1516 
1517 <a name="_sub69" href="#_subfunctions" class="code">function index = btkC3DserverAddAnalogChannel(id)</a>
1518 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1519 data = zeros(<a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>(h),1);
1520 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)+1;
1521 [scale, offset, label, description, gain] = <a href="#_sub96" class="code" title="subfunction [scale, offset, label, description, gain] = btkC3DserverExtractAnalogInfos_p(h,index)">btkC3DserverExtractAnalogInfos_p</a>(h,num);
1522 <a href="../../../Functions/BTK/linux64/@Common/btkAppendAnalog.html" class="code" title="function btkAppendAnalog(h, label, valuesdesc) %#ok">btkAppendAnalog</a>(h, label, data, description);
1523 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogOffset.html" class="code" title="function btkSetAnalogOffset(h, idx_or_label, new_offset) %#ok">btkSetAnalogOffset</a>(h, num, offset);
1524 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogScale.html" class="code" title="function btkSetAnalogScale(h, idx_or_label, newscale) %#ok">btkSetAnalogScale</a>(h, num, scale);
1525 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogGain.html" class="code" title="function btkSetAnalogGain(h, idx_or_label, new_gain) %#ok">btkSetAnalogGain</a>(h, num, gain);
1526 analogUsed = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'USED'</span>);
1527 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, num));
1528 <span class="keyword">if</span> (isstruct(analogUsed) &amp;&amp; ~isempty(analogUsed.description))
1529     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h,<span class="string">'ANALOG'</span>,<span class="string">'USED'</span>,analogUsed.description);
1530 <span class="keyword">end</span>
1531 index = num - 1;
1532 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1533 
1534 
1535 <a name="_sub70" href="#_subfunctions" class="code">function res = btkC3DserverDeleteAnalogChannel(id, index)</a>
1536 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1537 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1538     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1539 <span class="keyword">end</span>
1540 <a href="../../../Functions/BTK/linux64/@Common/btkRemoveAnalog.html" class="code" title="function btkRemoveAnalog(h, idx_or_label) %#ok">btkRemoveAnalog</a>(h, index+1);
1541 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)));
1542 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1543 res = 1;
1544 
1545 
1546 <a name="_sub71" href="#_subfunctions" class="code">function res = btkC3DserverDeleteAnalogChannelWithParameter(id, index)</a>
1547 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1548 <span class="keyword">if</span> ((index &lt; 0) || (index &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1549     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1550 <span class="keyword">end</span>
1551 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'FORCE_PLATFORM'</span>, <span class="string">'CHANNEL'</span>);
1552 <span class="keyword">if</span> (isstruct(md))
1553     <span class="keyword">if</span> (find(md.info.values == index + 1))
1554         error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Based on C3dServer, it seems not possible to delete an analog channel used for the force platforms. Contact the developers if is not the case.'</span>);
1555     <span class="keyword">end</span>
1556 <span class="keyword">end</span>
1557 <a href="../../../Functions/BTK/linux64/@Common/btkRemoveAnalog.html" class="code" title="function btkRemoveAnalog(h, idx_or_label) %#ok">btkRemoveAnalog</a>(h, index+1);
1558 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)));
1559 <span class="keyword">if</span> (isstruct(md))
1560     channels = md.info.values;
1561     indices = find(channels &gt; index + 1);
1562     channels(indices) = channels(indices) - 1;
1563     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'FORCE_PLATFORM'</span>, <span class="string">'CHANNEL'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, channels));
1564 <span class="keyword">end</span>
1565 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'LABELS'</span>);
1566 <span class="keyword">if</span> (isstruct(md))
1567     labels = md.info.values;
1568     labels = labels(setdiff(1:length(labels),index+1));
1569     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'LABELS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, labels));
1570 <span class="keyword">end</span>
1571 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'DESCRIPTIONS'</span>);
1572 <span class="keyword">if</span> (isstruct(md))
1573     descs = md.info.values;
1574     descs = descs(setdiff(1:length(descs),index+1));
1575     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'DESCRIPTIONS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, descs));
1576 <span class="keyword">end</span>
1577 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'SCALE'</span>);
1578 <span class="keyword">if</span> (isstruct(md))
1579     scales = md.info.values;
1580     scales = scales(setdiff(1:length(scales),index+1));
1581     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'SCALE'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Real'</span>, scales));
1582 <span class="keyword">end</span>
1583 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'OFFSET'</span>);
1584 <span class="keyword">if</span> (isstruct(md))
1585     offsets = md.info.values;
1586     offsets = offsets(setdiff(1:length(offsets),index+1));
1587     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'OFFSET'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, offsets));
1588 <span class="keyword">end</span>
1589 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'UNITS'</span>);
1590 <span class="keyword">if</span> (isstruct(md))
1591     units = md.info.values;
1592     units = units(setdiff(1:length(units),index+1));
1593     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'ANALOG'</span>, <span class="string">'UNITS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, units));
1594 <span class="keyword">end</span>
1595 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1596 res = 1;
1597 
1598 
1599 <a name="_sub72" href="#_subfunctions" class="code">function data = btkC3DserverGetForceData(id, cord, fp, startFrame, endFrame)</a>
1600 [h, frames] = <a href="#_sub97" class="code" title="subfunction [h, frames] = btkC3DserverCheckFPInputs_p(id, component, cord, fp, startFrame, endFrame)">btkC3DserverCheckFPInputs_p</a>(id, <span class="string">'F'</span>, cord, fp, startFrame, endFrame);
1601 <span class="keyword">try</span>
1602     fpws = <a href="../../../Functions/BTK/linux64/@BasicFilters/btkGetForcePlatformWrenches.html" class="code" title="function FPW = btkGetForcePlatformWrenches(h, threshold) %#ok">btkGetForcePlatformWrenches</a>(h, 0); <span class="comment">% Local frame</span>
1603 <span class="keyword">catch</span>
1604     err = lasterror();
1605     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1606 <span class="keyword">end</span>
1607 <span class="keyword">if</span> ((fp &lt; 0) || (fp &gt; length(fpws)))
1608     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect force platform index.'</span>);
1609 <span class="keyword">end</span>
1610 data_ = fpws(fp+1).F;
1611 data_ = single(data_(frames,cord+1));
1612 data = cell(length(frames),1);
1613 <span class="keyword">for</span> i=1:length(frames)
1614     data{i} = data_(i);
1615 <span class="keyword">end</span>
1616 
1617 
1618 <a name="_sub73" href="#_subfunctions" class="code">function data = btkC3DserverGetMomentData(id, cord, fp, startFrame, endFrame)</a>
1619 <span class="comment">% error('btk:C3Dserver','Method GetMomentData not yet implemented.');</span>
1620 [h, frames] = <a href="#_sub97" class="code" title="subfunction [h, frames] = btkC3DserverCheckFPInputs_p(id, component, cord, fp, startFrame, endFrame)">btkC3DserverCheckFPInputs_p</a>(id, <span class="string">'M'</span>, cord, fp, startFrame, endFrame);
1621 <span class="keyword">try</span>
1622     grws = <a href="../../../Functions/BTK/linux64/@BasicFilters/btkGetGroundReactionWrenches.html" class="code" title="function GRW = btkGetGroundReactionWrenches(h, threshold) %#ok">btkGetGroundReactionWrenches</a>(h, 5); <span class="comment">% Check for the threshold!</span>
1623 <span class="keyword">catch</span>
1624     err = lasterror();
1625     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
1626 <span class="keyword">end</span>
1627 <span class="keyword">if</span> ((fp &lt; 0) || (fp &gt; length(grws)))
1628     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect force platform index.'</span>);
1629 <span class="keyword">end</span>
1630 <span class="keyword">if</span> (cord == 0)
1631     data_ = grws(fp+1).P(:,1); <span class="comment">% Px</span>
1632 <span class="keyword">elseif</span> (cord == 1)
1633     data_ = grws(fp+1).P(:,2); <span class="comment">% Py</span>
1634 <span class="keyword">else</span>
1635     data_ = grws(fp+1).M(:,3); <span class="comment">% Tz</span>
1636 <span class="keyword">end</span>
1637 data_ = single(data_(frames));
1638 data = cell(length(frames),1);
1639 <span class="keyword">for</span> i=1:length(frames)
1640     data{i} = data_(i);
1641 <span class="keyword">end</span>
1642 
1643 
1644 <a name="_sub74" href="#_subfunctions" class="code">function res = btkC3DserverZeroAnalogChannel(id, channel, method, frames)</a>
1645 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1646 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h)))
1647     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1648 <span class="keyword">elseif</span> ((frames &lt; 0) || (frames &gt; <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h)))
1649     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1650 <span class="keyword">elseif</span> isempty(intersect(method, 1:4))
1651     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Incorrect method supplied to zero the analog channel.'</span>);
1652 <span class="keyword">elseif</span> (~isempty(intersect(method, 3:4)) &amp;&amp; ((frames &lt; 1) || (frames &gt; <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h))))
1653     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Incorrect number of frames supplied to zero the analog channel.'</span>);
1654 <span class="keyword">end</span>
1655 [data, info] = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalog.html" class="code" title="function [values info] = btkGetAnalog(h) %#ok">btkGetAnalog</a>(h,channel+1);
1656 <span class="comment">% Unscale the data</span>
1657 data = data / info.scale + info.offset;
1658 <span class="comment">% Remove baseline</span>
1659 <span class="keyword">if</span> (method == 1)
1660     base = ceil(mean(data)) - info.offset;
1661 <span class="keyword">elseif</span> (method == 2)
1662     base = 0;
1663     md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h,<span class="string">'FORCE_PLATFORM'</span>,<span class="string">'ZERO'</span>);
1664     <span class="keyword">if</span> isstruct(md)
1665         sF = md.info.values(1);
1666         eF = md.info.values(2);
1667         <span class="keyword">if</span> (sF == 0)
1668             sF = 1;
1669         <span class="keyword">end</span>
1670         sF = 1 + (sF - 1) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
1671         eF = eF * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
1672         base = ceil(mean(data(sF:eF))) - info.offset;
1673     <span class="keyword">end</span>
1674 <span class="keyword">elseif</span> (method == 3)
1675     base = ceil(mean(data(1:frames*<a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h)))) - info.offset;
1676 <span class="keyword">elseif</span> (method == 4)
1677     num = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogFrameNumber.html" class="code" title="function afn = btkGetAnalogFrameNumber(h) %#ok">btkGetAnalogFrameNumber</a>(h);
1678     base = ceil(mean(data(num-frames*<a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h)+1:num))) - info.offset;
1679 <span class="keyword">end</span>
1680 data = data - base;
1681 <span class="comment">% Rescale data</span>
1682 data = (data - info.offset) * info.scale;
1683 <span class="comment">% Store modified data</span>
1684 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogValues.html" class="code" title="function btkSetAnalogValues(h, idx_or_label, values) %#ok">btkSetAnalogValues</a>(h, channel+1, data);
1685 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1686 res = 1;
1687 
1688 
1689 <a name="_sub75" href="#_subfunctions" class="code">function data = btkC3DserverGetPointData(id, channel, cord, frame, scaled)</a>
1690 <span class="keyword">global</span> btkC3DserverHandles;
1691 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1692 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1693     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1694 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1695     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1696 <span class="keyword">elseif</span> ((cord &lt; 0) || (cord &gt; 2))
1697     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid Index has been used.'</span>);
1698 <span class="keyword">end</span>
1699 frame = frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1700 data = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1701 data = data(frame,cord+1);
1702 <span class="comment">% Unscale the data (if necessary)</span>
1703 <span class="keyword">if</span> ((btkC3DserverHandles(idx).dataType == 1) &amp;&amp; (scaled == char(0)))
1704     data = data / btkC3DserverHandles(idx).scalingFactor;
1705 <span class="keyword">end</span>
1706 data = single(data);
1707 
1708 
1709 <a name="_sub76" href="#_subfunctions" class="code">function data = btkC3DserverGetPointDataEx(id, channel, cord, startFrame, endFrame, scaled)</a>
1710 <span class="keyword">global</span> btkC3DserverHandles;
1711 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1712 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1713     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1714 <span class="keyword">elseif</span> (endFrame &lt; startFrame)
1715     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'End frame number lower than start frame number.'</span>);
1716 <span class="keyword">elseif</span> ((startFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (startFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1717     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid start frame number.'</span>);
1718 <span class="keyword">elseif</span> ((endFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (endFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1719     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid end frame number.'</span>);
1720 <span class="keyword">elseif</span> ((cord &lt; 0) || (cord &gt; 2))
1721     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid Index has been used.'</span>);
1722 <span class="keyword">end</span>
1723 start_ = startFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1724 end_ = endFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1725 data_ = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1726 frames = start_:end_;
1727 data_ = data_(frames,cord+1);
1728 <span class="comment">% Unscale the data (if necessary)</span>
1729 <span class="keyword">if</span> ((btkC3DserverHandles(idx).dataType == 1) &amp;&amp; (scaled == char(0)))
1730     data_ = data_ / btkC3DserverHandles(idx).scalingFactor;
1731     data_ = int16(data_);
1732 <span class="keyword">else</span>
1733     data_ = single(data_);
1734 <span class="keyword">end</span>
1735 data = num2cell(data_);
1736 
1737 
1738 <a name="_sub77" href="#_subfunctions" class="code">function data = btkC3DserverGetPointResidualEx(id, channel, startFrame, endFrame)</a>
1739 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1740 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1741     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1742 <span class="keyword">elseif</span> (endFrame &lt; startFrame)
1743     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'End frame number lower than start frame number.'</span>);
1744 <span class="keyword">elseif</span> ((startFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (startFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1745     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid start frame number.'</span>);
1746 <span class="keyword">elseif</span> ((endFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (endFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1747     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid end frame number.'</span>);
1748 <span class="keyword">end</span>
1749 start_ = startFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1750 end_ = endFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1751 frames = start_:end_;
1752 [values, data_] = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1753 data = num2cell(data_(frames));
1754 
1755 
1756 <a name="_sub78" href="#_subfunctions" class="code">function data = btkC3DserverGetPointResidual(id, channel, frame)</a>
1757 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1758 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1759     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1760 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1761     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1762 <span class="keyword">end</span>
1763 frame = frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1764 [values, data] = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1765 data = data(frame);
1766 
1767 
1768 <a name="_sub79" href="#_subfunctions" class="code">function data = btkC3DserverGetPointMask(id, channel, frame)</a>
1769 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1770 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1771     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1772 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1773     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1774 <span class="keyword">end</span>
1775 warning(<span class="string">'btk:C3Dserver:FakeMask'</span>, <span class="string">'The library BTK doesn''t support anymore the camera mask. Nothing is set. If you access to the mask, all the returned values are set to ''0000000''.'</span>);
1776 data = <span class="string">'0000000'</span>;
1777 
1778 <a name="_sub80" href="#_subfunctions" class="code">function data = btkC3DserverGetPointMaskEx(id, channel, startFrame, endFrame)</a>
1779 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1780 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1781     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1782 <span class="keyword">elseif</span> (endFrame &lt; startFrame)
1783     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'End frame number lower than start frame number.'</span>);
1784 <span class="keyword">elseif</span> ((startFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (startFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1785     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid start frame number.'</span>);
1786 <span class="keyword">elseif</span> ((endFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (endFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1787     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid end frame number.'</span>);
1788 <span class="keyword">end</span>
1789 warning(<span class="string">'btk:C3Dserver:FakeMask'</span>, <span class="string">'The library BTK doesn''t support anymore the camera mask. Nothing is set. If you access to the mask, all the returned values are set to ''0000000''.'</span>);
1790 data = repmat({<span class="string">'0000000'</span>},endFrame-startFrame+1,1);
1791 
1792 
1793 <a name="_sub81" href="#_subfunctions" class="code">function res = btkC3DserverSetPointData(id, channel, cord, frame, data)</a>
1794 <span class="keyword">global</span> btkC3DserverHandles;
1795 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1796 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1797     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1798 <span class="keyword">elseif</span> ((cord &lt; 0) || (cord &gt; 4))
1799     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid has been used.'</span>);
1800 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1801     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid frame number.'</span>);
1802 <span class="keyword">end</span>
1803 frame_ = frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1804 scale = 1;
1805 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'SCALE'</span>);
1806 <span class="keyword">if</span> (isstruct(md) &amp;&amp; isstruct(md.info))
1807     scale = abs(md.info.values(1));
1808 <span class="keyword">end</span>
1809 <span class="keyword">if</span> (cord &lt;= 2)
1810     data_ = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1811     data = double(data);
1812     <span class="keyword">if</span> (btkC3DserverHandles(idx).dataType == 1) <span class="comment">% Integer</span>
1813         data = data * scale;
1814     <span class="keyword">end</span>
1815     data_(frame_,cord+1) = data;
1816     <a href="../../../Functions/BTK/linux64/@Common/btkSetPointValues.html" class="code" title="function btkSetPointValues(h, idx_or_label, v) %#ok">btkSetPointValues</a>(h, channel+1, data_);
1817 <span class="keyword">elseif</span> (cord == 3)
1818     [values, data_] = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1819     data_(frame_) = floor(double(data) / scale) * scale;
1820     <a href="../../../Functions/BTK/linux64/@Common/btkSetPointResiduals.html" class="code" title="function btkSetPointResiduals(h, idx_or_abel, r) %#ok">btkSetPointResiduals</a>(h, channel+1, data_);
1821 <span class="keyword">elseif</span> (cord == 4)
1822     warning(<span class="string">'btk:C3Dserver:FakeMask'</span>, <span class="string">'The library BTK doesn''t support anymore the camera mask. Nothing is set. If you access to the mask, all the returned values are set to ''0000000''.'</span>);
1823 <span class="keyword">end</span>
1824 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1825 res = 1;
1826 
1827 
1828 <a name="_sub82" href="#_subfunctions" class="code">function res = btkC3DserverSetPointDataEx(id, channel, cord, frame, data)</a>
1829 <span class="keyword">global</span> btkC3DserverHandles;
1830 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1831 <span class="keyword">if</span> ((channel &lt; 0) || (channel &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)))
1832     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1833 <span class="keyword">elseif</span> ((frame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (frame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
1834     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid start frame number.'</span>);
1835 <span class="keyword">elseif</span> ((cord &lt; 0) || (cord &gt; 4))
1836     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid has been used.'</span>);
1837 <span class="keyword">elseif</span> (size(data,1) ~= 1)
1838     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid data size. Must contain only one row.'</span>);
1839 <span class="keyword">end</span>
1840 sF = frame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1;
1841 eF = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h);
1842 <span class="keyword">if</span> ((sF + length(data)) &lt;= eF)
1843     frames = sF:sF+length(data)-1;
1844 <span class="keyword">else</span>
1845     frames = sF:eF;
1846     data = data(1:length(frames));
1847 <span class="keyword">end</span>
1848 scale = 1;
1849 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'SCALE'</span>);
1850 <span class="keyword">if</span> (isstruct(md) &amp;&amp; isstruct(md.info))
1851     scale = abs(md.info.values(1));
1852 <span class="keyword">end</span>
1853 <span class="keyword">if</span> (cord &lt;= 2)
1854     data_ = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1855     data = double(data);
1856     <span class="keyword">if</span> (btkC3DserverHandles(idx).dataType == 1) <span class="comment">% Integer</span>
1857         data = data * scale;
1858     <span class="keyword">end</span>
1859     data_(frames,cord+1) = data;
1860     <a href="../../../Functions/BTK/linux64/@Common/btkSetPointValues.html" class="code" title="function btkSetPointValues(h, idx_or_label, v) %#ok">btkSetPointValues</a>(h, channel+1, data_);
1861 <span class="keyword">elseif</span> (cord == 3)
1862     [values, data_] = <a href="../../../Functions/BTK/linux64/@Common/btkGetPoint.html" class="code" title="function btkGetPoint(h, idx_or_label) %#ok">btkGetPoint</a>(h, channel+1);
1863     data_(frames) = floor(double(data) / scale) * scale;
1864     <a href="../../../Functions/BTK/linux64/@Common/btkSetPointResiduals.html" class="code" title="function btkSetPointResiduals(h, idx_or_abel, r) %#ok">btkSetPointResiduals</a>(h, channel+1, data_);
1865 <span class="keyword">elseif</span> (cord == 4)
1866     warning(<span class="string">'btk:C3Dserver:FakeMask'</span>, <span class="string">'The library BTK doesn''t support anymore the camera mask. Nothing is set. If you access to the mask, all the returned values are set to ''0000000''.'</span>);
1867 <span class="keyword">end</span>
1868 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1869 res = 1;
1870 
1871 
1872 <a name="_sub83" href="#_subfunctions" class="code">function index = btkC3DserverAddMarker(id)</a>
1873 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1874 <span class="comment">% index = -1; % Not modified</span>
1875 data = zeros(<a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h),3);
1876 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h) + 1;
1877 label = [<span class="string">'uname*'</span>, num2str(num)];
1878 <a href="../../../Functions/BTK/linux64/@Common/btkAppendPoint.html" class="code" title="function btkAppendPoint(h, type, label, values, residuals desc) %#ok">btkAppendPoint</a>(h, <span class="string">'Marker'</span>, label, data);
1879 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, num));
1880 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1881 index = num-1;
1882 
1883 
1884 <a name="_sub84" href="#_subfunctions" class="code">function res = btkC3DserverDeleteMarker(id, index)</a>
1885 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1886 <span class="comment">% res = 0; % Not removed</span>
1887 <span class="keyword">if</span> (index &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h))
1888     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid point number.'</span>);
1889 <span class="keyword">end</span>
1890 <a href="../../../Functions/BTK/linux64/@Common/btkRemovePoint.html" class="code" title="function btkRemovePoint(h, idx_or_label) %#ok">btkRemovePoint</a>(h, index+1);
1891 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)));
1892 res = 1;
1893 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1894 
1895 <a name="_sub85" href="#_subfunctions" class="code">function res = btkC3DserverDeleteMarkerWithParameter(id, index)</a>
1896 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1897 <span class="comment">% res = 0; % Not removed</span>
1898 <span class="keyword">if</span> (index &gt;= <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h))
1899     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid channel number.'</span>);
1900 <span class="keyword">end</span>
1901 <a href="../../../Functions/BTK/linux64/@Common/btkRemovePoint.html" class="code" title="function btkRemovePoint(h, idx_or_label) %#ok">btkRemovePoint</a>(h, index+1);
1902 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'USED'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h)));
1903 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'LABELS'</span>);
1904 <span class="keyword">if</span> (isstruct(md))
1905     labels = md.info.values;
1906     labels = labels(setdiff(1:length(labels),index+1));
1907     <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'LABELS'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Char'</span>, labels));
1908 <span class="keyword">end</span>
1909 md = <a href="btkFindMetaData.html" class="code" title="function md = btkFindMetaData(h,label,varargin)">btkFindMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'DESCRIPTIONS'</span>);
1910 <span class="keyword">if</span> (isstruct(md))
1911     descs = md.info.values;
1912     descs = descs(setdiff(1:length(descs),index+1));
1913 <span class="comment">%     btkAppendMetaData(h, 'POINT', 'DESCRIPTIONS', btkMetaDataInfo('Char', descs));</span>
1914 <span class="keyword">end</span>
1915 res = 1;
1916 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1917 
1918 
1919 <a name="_sub86" href="#_subfunctions" class="code">function num = btkC3DserverAddFrames(id, frames, insertAt)</a>
1920 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1921 ff = <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h);
1922 lf = <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h);
1923 snpf = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
1924 <span class="comment">% num = -1; % Not modified</span>
1925 <span class="keyword">if</span> (frames &lt; 0)
1926     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Negative number of frames.'</span>);
1927 <span class="keyword">elseif</span> (insertAt == -1)
1928     insertAt = ff;
1929 <span class="keyword">elseif</span> (insertAt == -2)
1930     insertAt = lf+1;
1931 <span class="comment">% elseif ((insertAt &lt; ff) || insertAt &gt; lf)</span>
1932 <span class="comment">%     error('btk:C3Dserver', 'Invalid insert index.');</span>
1933 <span class="keyword">else</span>
1934     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'As C3dServer under Matlab seems to not give the possibilty to insert frame other than using the index -1 and -2, we decide to do the same. If it is not the case, please contact the developers.'</span>);
1935 <span class="keyword">end</span>
1936 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h) + frames;
1937 <a href="../../../Functions/BTK/linux64/@Common/btkSetFrameNumber.html" class="code" title="function btkSetFrameNumber(h, num) %#ok">btkSetFrameNumber</a>(h, num);
1938 <span class="comment">% Modifying points</span>
1939 pidx = insertAt:insertAt+frames-1;
1940 newDataIdx = insertAt+frames:num;
1941 oldDataIdx = insertAt:num-frames;
1942 <span class="comment">% - values</span>
1943 pv = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointsValues.html" class="code" title="function v = btkGetPointsValues(h) %#ok">btkGetPointsValues</a>(h);
1944 pv(newDataIdx,:) = pv(oldDataIdx,:);
1945 pv(pidx,:) = zeros(length(pidx), 3 * <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h));
1946 <a href="../../../Functions/BTK/linux64/@Common/btkSetPointsValues.html" class="code" title="function btkSetPointsValues(h. v) %#ok">btkSetPointsValues</a>(h,pv);
1947 <span class="comment">% - residuals</span>
1948 rv = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointsResiduals.html" class="code" title="function r = btkGetPointsResiduals(h) %#ok">btkGetPointsResiduals</a>(h);
1949 rv(newDataIdx,:) = rv(oldDataIdx,:);
1950 rv(pidx,:) = zeros(length(pidx), <a href="../../../Functions/BTK/linux64/@Common/btkGetPointNumber.html" class="code" title="function pn = btkGetPointNumber(h) %#ok">btkGetPointNumber</a>(h));
1951 <a href="../../../Functions/BTK/linux64/@Common/btkSetPointsResiduals.html" class="code" title="function btkSetPointsResiduals(h. r) %#ok">btkSetPointsResiduals</a>(h,rv);
1952 <span class="comment">% Modifying analog channels</span>
1953 aidx = (insertAt-1)*snpf+1:(insertAt+frames-1)*snpf;
1954 av = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogsValues.html" class="code" title="function av = btkGetAnalogsValues(h) %#ok">btkGetAnalogsValues</a>(h);
1955 av(aidx(end)+1:<span class="keyword">end</span>,:) = av(aidx(1):end-frames*snpf,:);
1956 av(aidx,:) = zeros(length(aidx), <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogNumber.html" class="code" title="function an = btkGetAnalogNumber(h) %#ok">btkGetAnalogNumber</a>(h));
1957 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogsValues.html" class="code" title="function btkSetAnalogsValues(h, v) %#ok">btkSetAnalogsValues</a>(h, av);
1958 <span class="comment">% Update the parameter POINT:FRAMES</span>
1959 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'FRAMES'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, num));
1960 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1961 
1962 
1963 <a name="_sub87" href="#_subfunctions" class="code">function num = btkC3DserverDeleteFrames(id, startAt, frames)</a>
1964 [h, idx] = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
1965 ff = <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h);
1966 lf = <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h);
1967 snpf = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
1968 <span class="comment">% num = -1; % Not modified</span>
1969 <span class="keyword">if</span> ((startAt &lt; ff) || startAt &gt; lf)
1970     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Invalid index.'</span>);
1971 <span class="keyword">elseif</span> (frames &gt; lf - startAt + 1)
1972     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Incorrect number of frames specified.'</span>)
1973 <span class="keyword">elseif</span> (frames == lf - ff + 1) <span class="comment">% Clear all</span>
1974     error(<span class="string">'btk:C3Dserver'</span>,<span class="string">'Due to the mechanism used in BTK, it is not possible to remove all the frames. Contact the developers if you really need it.'</span>)
1975 <span class="keyword">end</span>
1976 <span class="comment">% Data to keep</span>
1977 <span class="comment">% - Point</span>
1978 pidx = setdiff(ff:lf, startAt:startAt+frames-1)-ff+1;
1979 pv = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointsValues.html" class="code" title="function v = btkGetPointsValues(h) %#ok">btkGetPointsValues</a>(h);
1980 pv = pv(pidx,:);
1981 rv = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointsResiduals.html" class="code" title="function r = btkGetPointsResiduals(h) %#ok">btkGetPointsResiduals</a>(h);
1982 rv = rv(pidx,:);
1983 <span class="comment">% - Analog</span>
1984 aidx = setdiff(ff:lf*snpf, ((startAt-1)*snpf)+ff:(startAt+frames-1)*snpf)-ff+1;
1985 av = <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogsValues.html" class="code" title="function av = btkGetAnalogsValues(h) %#ok">btkGetAnalogsValues</a>(h);
1986 av = av(aidx,:);
1987 <span class="comment">% Resizing</span>
1988 num = <a href="../../../Functions/BTK/linux64/@Common/btkGetPointFrameNumber.html" class="code" title="function pfn = btkGetPointFrameNumber(h) %#ok">btkGetPointFrameNumber</a>(h) - frames;
1989 <a href="../../../Functions/BTK/linux64/@Common/btkSetFrameNumber.html" class="code" title="function btkSetFrameNumber(h, num) %#ok">btkSetFrameNumber</a>(h, num);
1990 <span class="comment">% Storing modifications</span>
1991 <a href="../../../Functions/BTK/linux64/@Common/btkSetPointsValues.html" class="code" title="function btkSetPointsValues(h. v) %#ok">btkSetPointsValues</a>(h,pv);
1992 <a href="../../../Functions/BTK/linux64/@Common/btkSetPointsResiduals.html" class="code" title="function btkSetPointsResiduals(h. r) %#ok">btkSetPointsResiduals</a>(h,rv);
1993 <a href="../../../Functions/BTK/linux64/@Common/btkSetAnalogsValues.html" class="code" title="function btkSetAnalogsValues(h, v) %#ok">btkSetAnalogsValues</a>(h, av);
1994 <span class="comment">% Update the parameter POINT:FRAMES</span>
1995 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, <span class="string">'POINT'</span>, <span class="string">'FRAMES'</span>, <a href="btkMetaDataInfo.html" class="code" title="function info = btkMetaDataInfo(format, values, numdims)">btkMetaDataInfo</a>(<span class="string">'Integer'</span>, num));
1996 <a href="#_sub92" class="code" title="subfunction btkC3DserverSetModified_p(idx, s)">btkC3DserverSetModified_p</a>(idx,1);
1997 
1998 
1999 <span class="comment">% -------------------------------------------------------------------------</span>
2000 <span class="comment">% Private functions</span>
2001 <span class="comment">% -------------------------------------------------------------------------</span>
2002 
2003 <span class="comment">% Create a new handle and return its ID.</span>
2004 <a name="_sub88" href="#_subfunctions" class="code">function id = btkC3DserverRequestNewHandle_p()</a>
2005 <span class="keyword">global</span> btkC3DserverHandles;
2006 id = size(btkC3DserverHandles,2);
2007 idx = id + 1;
2008 btkC3DserverHandles(idx).id = id;
2009 btkC3DserverHandles(idx).handle = NaN;
2010 btkC3DserverHandles(idx).file = <span class="string">''</span>;
2011 btkC3DserverHandles(idx).fileType = 0;
2012 btkC3DserverHandles(idx).dataType = 0;
2013 btkC3DserverHandles(idx).scalingFactor = 1;
2014 btkC3DserverHandles(idx).modified = 0;
2015 btkC3DserverHandles(idx).strictChecking = 1;
2016 btkC3DserverHandles(idx).parameterIndexMapping = {};
2017 btkC3DserverHandles(idx).copiedParameter = 0;
2018 btkC3DserverHandles(idx).hiddenParameterEvents = [0,0];
2019 
2020 <span class="comment">% Check if the given ID is valid and then return the index of the associated index.</span>
2021 <a name="_sub89" href="#_subfunctions" class="code">function idx = btkC3DserverCheckHandleID_p(id)</a>
2022 <span class="keyword">global</span> btkC3DserverHandles;
2023 idx = NaN;
2024 <span class="keyword">for</span> i=1:size(btkC3DserverHandles,2)
2025     <span class="keyword">if</span> (btkC3DserverHandles(i).id == id)
2026         idx = i;
2027         <span class="keyword">break</span>;
2028     <span class="keyword">end</span>
2029 <span class="keyword">end</span>
2030 <span class="keyword">if</span> isnan(idx)
2031     error(<span class="string">'Unknown C3Dserver handle ID.'</span>);
2032 <span class="keyword">end</span>
2033 
2034 <span class="comment">% Check if the handle at the index 'idx' is valid (not NaN).</span>
2035 <a name="_sub90" href="#_subfunctions" class="code">function res = btkC3DserverCheckHandleValue_p(idx)</a>
2036 <span class="keyword">global</span> btkC3DserverHandles;
2037 res = 0;
2038 <span class="keyword">if</span> (isnan(btkC3DserverHandles(idx).handle))
2039     res = 1;
2040 <span class="keyword">end</span>
2041 
2042 
2043 <span class="comment">% Check the validity of the ID, the value of the handle and extract it.</span>
2044 <a name="_sub91" href="#_subfunctions" class="code">function [h, idx] = btkC3DserverExtractHandle_p(id)</a>
2045 <span class="keyword">global</span> btkC3DserverHandles;
2046 idx = <a href="#_sub89" class="code" title="subfunction idx = btkC3DserverCheckHandleID_p(id)">btkC3DserverCheckHandleID_p</a>(id);
2047 <span class="keyword">if</span> (<a href="#_sub90" class="code" title="subfunction res = btkC3DserverCheckHandleValue_p(idx)">btkC3DserverCheckHandleValue_p</a>(idx) ~= 0)
2048     error(<span class="string">'File is not open.'</span>);
2049 <span class="keyword">end</span>
2050 h = btkC3DserverHandles(idx).handle;
2051 
2052 
2053 <span class="comment">% Set the handle as modified</span>
2054 <a name="_sub92" href="#_subfunctions" class="code">function btkC3DserverSetModified_p(idx, s)</a>
2055 <span class="keyword">global</span> btkC3DserverHandles;
2056 btkC3DserverHandles(idx).modified = s;
2057 
2058 
2059 <span class="comment">% Return the parameter associated with the given index</span>
2060 <a name="_sub93" href="#_subfunctions" class="code">function [parameter, indices, parent] = btkC3DserverExtractParameter_p(h, idx, index)</a>
2061 <span class="keyword">global</span> btkC3DserverHandles;
2062 index_ = find([btkC3DserverHandles(idx).parameterIndexMapping{:,2}] == index);
2063 <span class="keyword">if</span> isempty(index_)
2064     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
2065 <span class="keyword">elseif</span> (length(index_) ~= 1)
2066     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Duplicated internal parameter index.'</span>);
2067 <span class="keyword">else</span>
2068     indices = btkC3DserverHandles(idx).parameterIndexMapping{index_,1};
2069     <span class="keyword">try</span>
2070         md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
2071         <span class="keyword">if</span> (isstruct(md.children))
2072             labels = fieldnames(md.children);
2073             <span class="keyword">if</span> (size(labels,1) &lt; indices(1))
2074                 error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid internal group index.'</span>);
2075             <span class="keyword">end</span>
2076             children = md.children.(labels{indices(1)}).children;
2077             <span class="keyword">if</span> (isstruct(children))
2078                 labels_ = fieldnames(children);
2079                 <span class="keyword">if</span> (size(labels_,1) &lt; indices(2))
2080                     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid internal parameter index.'</span>);
2081                 <span class="keyword">else</span>
2082                     label = labels_{indices(2)};
2083                     parameter = children.(label);
2084                     parameter.label = label;
2085                     parameter.id = indices(1);
2086                     parent = md.children.(labels{indices(1)});
2087                     <span class="keyword">return</span>;
2088                 <span class="keyword">end</span>
2089             <span class="keyword">else</span>
2090                 error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid internal parameter index (no parameter).'</span>);
2091             <span class="keyword">end</span>
2092         <span class="keyword">else</span>
2093             error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'No group and parameter.'</span>);
2094         <span class="keyword">end</span>
2095     <span class="keyword">catch</span>
2096         err = lasterror();
2097         error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Internal error: '</span>, err.message]);
2098     <span class="keyword">end</span>
2099 <span class="keyword">end</span>
2100 
2101 <a name="_sub94" href="#_subfunctions" class="code">function parameter = btkC3DserverGetCopiedParameter_p(idx)</a>
2102 <span class="keyword">global</span> btkC3DserverHandles;
2103 <span class="keyword">if</span> ~isstruct(btkC3DserverHandles(idx).copiedParameter)
2104     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
2105 <span class="keyword">end</span>
2106 parameter = btkC3DserverHandles(idx).copiedParameter;
2107 
2108 <a name="_sub95" href="#_subfunctions" class="code">function btkC3DserverModifyCopiedParameter_p(idx, field, value, item)</a>
2109 <span class="keyword">global</span> btkC3DserverHandles;
2110 <span class="keyword">if</span> ~isstruct(btkC3DserverHandles(idx).copiedParameter)
2111     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>);
2112 <span class="keyword">end</span>
2113 <span class="keyword">if</span> (nargin == 4) <span class="comment">% info.values</span>
2114     values = btkC3DserverHandles(idx).copiedParameter.(field{1}).(field{2});
2115     <span class="keyword">if</span> (item &gt; numel(values))
2116         error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid index has been used.'</span>)
2117     <span class="keyword">end</span>
2118     values{item+1} = value;
2119     btkC3DserverHandles(idx).copiedParameter.(field{1}).(field{2}) = values;
2120 <span class="keyword">elseif</span> (iscell(field)) <span class="comment">% info.*</span>
2121     btkC3DserverHandles(idx).copiedParameter.(field{1}).(field{2}) = value;
2122 <span class="keyword">else</span>
2123     btkC3DserverHandles(idx).copiedParameter.(field) = value;
2124 <span class="keyword">end</span>
2125 
2126 <a name="_sub96" href="#_subfunctions" class="code">function [scale, offset, label, description, gain] = btkC3DserverExtractAnalogInfos_p(h,index)</a>
2127 scale = 1;
2128 gen_scale = 1;
2129 offset = 0;
2130 label = [<span class="string">'uname_'</span>, num2str(index)];
2131 gain = 0;
2132 description = <span class="string">''</span>;
2133 md = <a href="../../../Functions/BTK/linux64/@Common/btkGetMetaData.html" class="code" title="function btkGetMetaData(h) %#ok">btkGetMetaData</a>(h);
2134 <span class="keyword">if</span> (isstruct(md.children) &amp;&amp; isfield(md.children, <span class="string">'ANALOG'</span>))
2135     md = md.children.ANALOG;
2136     <span class="keyword">if</span> (isstruct(md.children))
2137         <span class="comment">% SCALE</span>
2138         <span class="keyword">if</span> (isfield(md.children, <span class="string">'SCALE'</span>) &amp;&amp; isstruct(md.children.SCALE.info) &amp;&amp; (numel(md.children.SCALE.info.values) &gt;= index))
2139             scale = md.children.SCALE.info.values(index);
2140         <span class="keyword">end</span>
2141         <span class="comment">% GEN_SCALE</span>
2142         <span class="keyword">if</span> (isfield(md.children, <span class="string">'GEN_SCALE'</span>) &amp;&amp; isstruct(md.children.GEN_SCALE.info))
2143             gen_scale = md.children.GEN_SCALE.info.values(1);
2144         <span class="keyword">end</span>
2145         scale = scale * gen_scale;
2146         <span class="comment">% OFFSET</span>
2147         <span class="keyword">if</span> (isfield(md.children, <span class="string">'OFFSET'</span>) &amp;&amp; isstruct(md.children.OFFSET.info) &amp;&amp; (numel(md.children.OFFSET.info.values) &gt;= index))
2148             format = <span class="string">'Signed'</span>;
2149             offsets = md.children.OFFSET.info.values;
2150 <span class="comment">%             bits = 12;</span>
2151 <span class="comment">%             format = 'Signed';</span>
2152 <span class="comment">%             if (isfield(md.children, 'BITS') &amp;&amp; isstruct(md.children.BITS.info))</span>
2153 <span class="comment">%                 bits = md.children.BITS.info.values(1);</span>
2154 <span class="comment">%             end</span>
2155             <span class="keyword">if</span> (isfield(md.children, <span class="string">'FORMAT'</span>) &amp;&amp; isstruct(md.children.FORMAT.info))
2156                 format = md.children.FORMAT.info.values{1};
2157             <span class="keyword">end</span>
2158 <span class="comment">%             % Check</span>
2159 <span class="comment">%             inc = 1;</span>
2160 <span class="comment">%             while (inc &lt;= numel(offsets))</span>
2161 <span class="comment">%                 if (offsets(inc) &gt; 2^bits)</span>
2162 <span class="comment">%                     bits = bits * 2;</span>
2163 <span class="comment">%                 else</span>
2164 <span class="comment">%                     inc = inc + 1;</span>
2165 <span class="comment">%                 end</span>
2166 <span class="comment">%             end</span>
2167 <span class="comment">%             if (bits &gt;= 16)</span>
2168 <span class="comment">%                 format = 'Unsigned';</span>
2169 <span class="comment">%             end</span>
2170             offset = offsets(index);
2171             <span class="keyword">if</span> (strcmpi(format,<span class="string">'Unsigned'</span>))
2172                 offset = double(typecast(int16(offset), <span class="string">'uint16'</span>));
2173             <span class="keyword">end</span>
2174         <span class="keyword">end</span>
2175         <span class="comment">% LABELS</span>
2176         <span class="keyword">if</span> (isfield(md.children, <span class="string">'LABELS'</span>) &amp;&amp; isstruct(md.children.LABELS.info) &amp;&amp; (numel(md.children.LABELS.info.values) &gt;= index))
2177             label = md.children.LABELS.info.values{index};
2178         <span class="keyword">end</span>
2179         <span class="comment">% DESCRIPTIONS</span>
2180         <span class="keyword">if</span> (isfield(md.children, <span class="string">'DESCRIPTIONS'</span>) &amp;&amp; isstruct(md.children.DESCRIPTIONS.info) &amp;&amp; (numel(md.children.DESCRIPTIONS.info.values) &gt;= index))
2181             description = md.children.DESCRIPTIONS.info.values{index};
2182         <span class="keyword">end</span>
2183         <span class="comment">% GAIN</span>
2184         <span class="keyword">if</span> (isfield(md.children, <span class="string">'GAIN'</span>) &amp;&amp; isstruct(md.children.GAIN.info) &amp;&amp; (numel(md.children.GAIN.info.values) &gt;= index))
2185             gain = md.children.GAIN.info.values(index);
2186         <span class="keyword">end</span>
2187     <span class="keyword">end</span>
2188 <span class="keyword">end</span>
2189 
2190 <a name="_sub97" href="#_subfunctions" class="code">function [h, frames] = btkC3DserverCheckFPInputs_p(id, component, cord, fp, startFrame, endFrame)</a>
2191 h = <a href="#_sub91" class="code" title="subfunction [h, idx] = btkC3DserverExtractHandle_p(id)">btkC3DserverExtractHandle_p</a>(id);
2192 <span class="keyword">switch</span> component
2193     <span class="keyword">case</span> <span class="string">'F'</span>
2194         cpt = <span class="string">'force'</span>;
2195     <span class="keyword">case</span> <span class="string">'M'</span>
2196         cpt = <span class="string">'moment'</span>;
2197 <span class="keyword">end</span>
2198 <span class="keyword">if</span> ((startFrame == -1) &amp;&amp; (endFrame == -1))
2199     startFrame = <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h);
2200     endFrame = <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h);
2201 <span class="keyword">end</span>
2202 <span class="keyword">if</span> ((cord &lt; 0) || (cord &gt; 2))
2203     error(<span class="string">'btk:C3Dserver'</span>, [<span class="string">'Incorrect '</span>, cpt, <span class="string">' component.'</span>]);
2204 <span class="keyword">elseif</span> ((startFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (startFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
2205     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Incorrect start index.'</span>);
2206 <span class="keyword">elseif</span> ((endFrame &lt; <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) || (endFrame &gt; <a href="btkGetLastFrame.html" class="code" title="function lf = btkGetLastFrame(h) %#ok">btkGetLastFrame</a>(h)))
2207     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'Invalid end index.'</span>);
2208 <span class="keyword">elseif</span> (endFrame &lt; startFrame)
2209     error(<span class="string">'btk:C3Dserver'</span>, <span class="string">'End index lower then start index.'</span>);
2210 <span class="keyword">end</span>
2211 sF = (startFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h)) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h) + 1;
2212 eF = (endFrame - <a href="../../../Functions/BTK/linux64/@Common/btkGetFirstFrame.html" class="code" title="function ff = btkGetFirstFrame(h) %#ok">btkGetFirstFrame</a>(h) + 1) * <a href="../../../Functions/BTK/linux64/@Common/btkGetAnalogSampleNumberPerFrame.html" class="code" title="function ratio = btkGetAnalogSampleNumberPerFrame(h) %#ok">btkGetAnalogSampleNumberPerFrame</a>(h);
2213 frames = sF:eF;
2214 
2215 <span class="comment">% Last input is the description</span>
2216 <a name="_sub98" href="#_subfunctions" class="code">function btkC3DserverAddMetaData_p(h, varargin)</a>
2217 <a href="../../../Functions/BTK/linux64/@Common/btkAppendMetaData.html" class="code" title="function btkAppendMetaData(h, label, sublabel, ..., info) %#ok">btkAppendMetaData</a>(h, varargin{1:end-1});
2218 <span class="keyword">if</span> (isstruct(varargin{end-1}))
2219     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, varargin{1:end-2}, varargin{end});
2220 <span class="keyword">else</span>
2221     <a href="../../../Functions/BTK/linux64/@Common/btkSetMetaDataDescription.html" class="code" title="function btkSetMetaDataDescription(h, label_idx, sublabel_idx, ..., newDescription) %#ok">btkSetMetaDataDescription</a>(h, varargin{1:end-1}, varargin{end});
2222 <span class="keyword">end</span>
2223 
2224 <a name="_sub99" href="#_subfunctions" class="code">function num = btkC3DserverGetEventNumber_p(h,idx)</a>
2225 <span class="keyword">global</span> btkC3DserverHandles;
2226 num = <a href="btkGetEventNumber.html" class="code" title="function num = btkGetEventNumber(h)">btkGetEventNumber</a>(h) - btkC3DserverHandles(idx).hiddenParameterEvents(2);
2227 
2228 <a name="_sub100" href="#_subfunctions" class="code">function index_ = btkC3DserverGetEventIndex_p(index,idx)</a>
2229 <span class="keyword">global</span> btkC3DserverHandles;
2230 index_ = index + 1;
2231 <span class="keyword">if</span> (index_ &gt;= btkC3DserverHandles(idx).hiddenParameterEvents(1))
2232     index_ = index_ + btkC3DserverHandles(idx).hiddenParameterEvents(2);
2233 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 28-Apr-2021 14:02:00 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>