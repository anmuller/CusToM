<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of read_write_entire_textfile</title>
  <meta name="keywords" content="read_write_entire_textfile">
  <meta name="description" content="READ_WRITE_ENTIRE_TEXTFILE Read or write a whole text file to/from memory">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html Functions --><!-- # ExternLibrary --><!-- menu.html export_fig -->
<h1>read_write_entire_textfile
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>READ_WRITE_ENTIRE_TEXTFILE Read or write a whole text file to/from memory</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function fstrm = read_write_entire_textfile(fname, fstrm) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">READ_WRITE_ENTIRE_TEXTFILE Read or write a whole text file to/from memory

 Read or write an entire text file to/from memory, without leaving the
 file open if an error occurs.

 Reading:
   fstrm = read_write_entire_textfile(fname)
 Writing:
   read_write_entire_textfile(fname, fstrm)

IN:
   fname - Pathname of text file to be read in.
   fstrm - String to be written to the file, including carriage returns.

OUT:
   fstrm - String read from the file. If an fstrm input is given the
           output is the same as that input.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="export_fig.html" class="code" title="function [imageData, alpha] = export_fig(varargin) %#ok<*STRCL1>">export_fig</a>	EXPORT_FIG  Exports figures in a publication-quality format</li><li><a href="fix_lines.html" class="code" title="function fstrm = fix_lines(fstrm, fname2)">fix_lines</a>	FIX_LINES  Improves the line style of eps files generated by print</li><li><a href="print2eps.html" class="code" title="function print2eps(name, fig, export_options, varargin)">print2eps</a>	PRINT2EPS  Prints figures to eps with improved line styles</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%READ_WRITE_ENTIRE_TEXTFILE Read or write a whole text file to/from memory</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% Read or write an entire text file to/from memory, without leaving the</span>
0004 <span class="comment">% file open if an error occurs.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% Reading:</span>
0007 <span class="comment">%   fstrm = read_write_entire_textfile(fname)</span>
0008 <span class="comment">% Writing:</span>
0009 <span class="comment">%   read_write_entire_textfile(fname, fstrm)</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%IN:</span>
0012 <span class="comment">%   fname - Pathname of text file to be read in.</span>
0013 <span class="comment">%   fstrm - String to be written to the file, including carriage returns.</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%OUT:</span>
0016 <span class="comment">%   fstrm - String read from the file. If an fstrm input is given the</span>
0017 <span class="comment">%           output is the same as that input.</span>
0018 
0019 <a name="_sub0" href="#_subfunctions" class="code">function fstrm = read_write_entire_textfile(fname, fstrm)</a>
0020 modes = {<span class="string">'rt'</span>, <span class="string">'wt'</span>};
0021 writing = nargin &gt; 1;
0022 fh = fopen(fname, modes{1+writing});
0023 <span class="keyword">if</span> fh == -1
0024     error(<span class="string">'Unable to open file %s.'</span>, fname);
0025 <span class="keyword">end</span>
0026 <span class="keyword">try</span>
0027     <span class="keyword">if</span> writing
0028         fwrite(fh, fstrm, <span class="string">'char*1'</span>);
0029     <span class="keyword">else</span>
0030         fstrm = fread(fh, <span class="string">'*char'</span>)';
0031     <span class="keyword">end</span>
0032 <span class="keyword">catch</span> ex
0033     fclose(fh);
0034     rethrow(ex);
0035 <span class="keyword">end</span>
0036 fclose(fh);
0037 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 28-Apr-2021 14:02:00 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>